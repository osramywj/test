const _ = require("lodash");
const list = [
  {
    "id": 270810690155522,
    "group_id": "Database",
    "group_name": "数据库",
    "parent_id": "0",
    "description": null,
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1705560345575,
    "update_time": 1705560345575,
    "update_user_id": 3
  },
  {
    "id": 270810691400706,
    "group_id": "AuxiliaryResource",
    "group_name": "辅助资源",
    "parent_id": "0",
    "description": null,
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1705560345727,
    "update_time": 1705560345727,
    "update_user_id": 3
  },
  {
    "id": 270810691687425,
    "group_id": "BusinessResource",
    "group_name": "业务资源",
    "parent_id": "0",
    "description": null,
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1705560345762,
    "update_time": 1705560345762,
    "update_user_id": 3
  },
  {
    "id": 270810691744770,
    "group_id": "ITDevice",
    "group_name": "IT设备",
    "parent_id": "0",
    "description": null,
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1705560345770,
    "update_time": 1705560345770,
    "update_user_id": 3
  },
  {
    "id": 270810691834882,
    "group_id": "Middleware",
    "group_name": "中间件",
    "parent_id": "0",
    "description": null,
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1705560345780,
    "update_time": 1705560345780,
    "update_user_id": 3
  },
  {
    "id": 270810691924993,
    "group_id": "DataCenterInfrastructure",
    "group_name": "数据中心基础设施",
    "parent_id": "0",
    "description": null,
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1705560345791,
    "update_time": 1705560345791,
    "update_user_id": 3
  },
  {
    "id": 270810692031489,
    "group_id": "Cluster",
    "group_name": "集群",
    "parent_id": "0",
    "description": null,
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1705560345804,
    "update_time": 1705560345804,
    "update_user_id": 3
  },
  {
    "id": 270810692162562,
    "group_id": "MonitoringSoftware",
    "group_name": "监控软件",
    "parent_id": "0",
    "description": null,
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1705560345820,
    "update_time": 1705560345820,
    "update_user_id": 3
  },
  {
    "id": 270810692236290,
    "group_id": "ContainerResource",
    "group_name": "容器资源",
    "parent_id": "0",
    "description": null,
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1705560345829,
    "update_time": 1705560345829,
    "update_user_id": 3
  },
  {
    "id": 270810692301825,
    "group_id": "Server",
    "group_name": "服务器",
    "parent_id": "ITDevice",
    "description": null,
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1705560345837,
    "update_time": 1705560345837,
    "update_user_id": 3
  },
  {
    "id": 270810692375553,
    "group_id": "NetworkDevice",
    "group_name": "网络设备",
    "parent_id": "ITDevice",
    "description": null,
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1705560345846,
    "update_time": 1705560345846,
    "update_user_id": 3
  },
  {
    "id": 270810692506626,
    "group_id": "SecurityDevice",
    "group_name": "安全设备",
    "parent_id": "ITDevice",
    "description": null,
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1705560345862,
    "update_time": 1705560345862,
    "update_user_id": 3
  },
  {
    "id": 270810692580354,
    "group_id": "StorageDevice",
    "group_name": "存储设备",
    "parent_id": "ITDevice",
    "description": null,
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1705560345871,
    "update_time": 1705560345871,
    "update_user_id": 3
  },
  {
    "id": 270810692654082,
    "group_id": "ApplicationServerMiddleware",
    "group_name": "应用服务器中间件",
    "parent_id": "Middleware",
    "description": null,
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1705560345880,
    "update_time": 1705560345880,
    "update_user_id": 3
  },
  {
    "id": 270810692744193,
    "group_id": "MessageMiddleware",
    "group_name": "消息中间件",
    "parent_id": "Middleware",
    "description": null,
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1705560345891,
    "update_time": 1705560345891,
    "update_user_id": 3
  },
  {
    "id": 270810692858882,
    "group_id": "TaskSchedulingMiddleware",
    "group_name": "任务调度中间件",
    "parent_id": "Middleware",
    "description": null,
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1705560345905,
    "update_time": 1705560345905,
    "update_user_id": 3
  },
  {
    "id": 270810692948993,
    "group_id": "SearchMiddleware",
    "group_name": "搜索中间件",
    "parent_id": "Middleware",
    "description": null,
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1705560345916,
    "update_time": 1705560345916,
    "update_user_id": 3
  },
  {
    "id": 270810693112834,
    "group_id": "ServiceGovernanceMiddleware",
    "group_name": "服务治理中间件",
    "parent_id": "Middleware",
    "description": null,
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1705560345936,
    "update_time": 1705560345936,
    "update_user_id": 3
  },
  {
    "id": 270810693211137,
    "group_id": "StorageMiddleware",
    "group_name": "存储中间件",
    "parent_id": "Middleware",
    "description": null,
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1705560345948,
    "update_time": 1705560345948,
    "update_user_id": 3
  },
  {
    "id": 270810693456898,
    "group_id": "EnvironmentalMonitoringEquipment",
    "group_name": "动环设备",
    "parent_id": "ITDevice",
    "description": null,
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1705560345978,
    "update_time": 1705560345978,
    "update_user_id": 3
  },
  {
    "id": 270810693596161,
    "group_id": "RelationalDatabase",
    "group_name": "关系型数据库",
    "parent_id": "Database",
    "description": null,
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1705560345995,
    "update_time": 1705560345995,
    "update_user_id": 3
  },
  {
    "id": 270810693653506,
    "group_id": "NoSQLDatabase",
    "group_name": "非关系型数据库",
    "parent_id": "Database",
    "description": null,
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1705560346002,
    "update_time": 1705560346002,
    "update_user_id": 3
  },
  {
    "id": 337925547381505,
    "group_id": "blueOceanBank",
    "group_name": "蓝海银行",
    "parent_id": "0",
    "description": "",
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1713753077170,
    "update_time": 1713853552389,
    "update_user_id": 3
  },
  {
    "id": 337925547381506,
    "group_id": "networkAndSecurityDevices",
    "group_name": "02网络与安全设备",
    "parent_id": "blueOceanBank",
    "description": "",
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1713753077170,
    "update_time": 1713853552389,
    "update_user_id": 3
  },
  {
    "id": 337925980197633,
    "group_id": "computerRoomAndEnvironmentalFacilities",
    "group_name": "01机房与环境设施",
    "parent_id": "blueOceanBank",
    "description": "",
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1713753130004,
    "update_time": 1713853181616,
    "update_user_id": 3
  },
  {
    "id": 338064658428673,
    "group_id": "serverAndStorage",
    "group_name": "03服务器与存储",
    "parent_id": "blueOceanBank",
    "description": "",
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1713770058499,
    "update_time": 1713851835412,
    "update_user_id": 3
  },
  {
    "id": 338066455597826,
    "group_id": "applicationsAndSoftware",
    "group_name": "04应用与软件",
    "parent_id": "blueOceanBank",
    "description": "",
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1713770277880,
    "update_time": 1713851849139,
    "update_user_id": 3
  },
  {
    "id": 359864761537281,
    "group_id": "ci_dcqc",
    "group_name": "重庆大数据",
    "parent_id": "0",
    "description": "",
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1716431203898,
    "update_time": 1716431203898,
    "update_user_id": 3
  },
  {
    "id": 359864761537282,
    "group_id": "dcqc_cloud",
    "group_name": "云资源",
    "parent_id": "ci_dcqc",
    "description": "",
    "index_of": 0,
    "tenant_id": 110,
    "project_id": null,
    "create_user_id": 3,
    "create_time": 1716431203898,
    "update_time": 1716431203898,
    "update_user_id": 3
  }
];

// parent_id跟父结点的group_id进行关联，最顶层parent_id为0，获取递归树
function buildRecursiveTree(list, parentId = '0') {
  const children = list.filter(item => item.parent_id === parentId);
  const tree = children.map(item => {
    const sub = buildRecursiveTree(list, item.group_id);
    if (sub.length > 0) {
      return {
        id: item.id,
        name: item.group_name,
        children: buildRecursiveTree(list, item.group_id),
      };
    } else {
      return {
        id: item.id,
        name: item.group_name,
      };
    }
  });
  return tree;
}

console.log(JSON.stringify(buildRecursiveTree(list)))