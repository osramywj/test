pe](1,i,t.range,!0);n(t,r.values,i,e)})},this)},t.prototype.setInputRanges=function(t,e){$(t,function(t){var n,i,r,o,a,s=this.findTargetInfo(t,e);if(t.range=t.range||[],s&&!0!==s){t.panelId=s.panelId;var l=OG[t.brushType](0,s.coordSys,t.coordRange),u=t.__rangeOffset;t.range=u?WG[t.brushType](l.values,u.offset,(n=l.xyMinMax,i=u.xyMinMax,r=XG(n),o=XG(i),a=[r[0]/o[0],r[1]/o[1]],isNaN(a[0])&&(a[0]=1),isNaN(a[1])&&(a[1]=1),a)):l.values}},this)},t.prototype.makePanelOpts=function(t,e){return tt(this._targetInfoList,function(n){var i=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:e?e(n):null,clipPath:$P(i),isTargetByCursor:eZ(i,t,n.coordSysModel),getLinearBrushOtherExtent:tZ(i)}})},t.prototype.controlSeries=function(t,e,n){var i=this.findTargetInfo(t,n);return!0===i||i&&J(i.coordSyses,e.coordinateSystem)>=0},t.prototype.findTargetInfo=function(t,e){for(var n=this._targetInfoList,i=RG(e,t),r=0;r<n.length;r++){var o=n[r],a=t.panelId;if(a){if(o.panelId===a)return o}else for(var s=0;s<GG.length;s++)if(GG[s](i,o))return o}return!0},t}();function LG(t){return t[0]>t[1]&&t.reverse(),t}function RG(t,e){return so(t,e,{includeMainTypes:kG})}var VG={grid:function(t,e){var n=t.xAxisModels,i=t.yAxisModels,r=t.gridModels,o=Zt(),a={},s={};(n||i||r)&&($(n,function(t){var e=t.axis.grid.model;o.set(e.id,e),a[e.id]=!0}),$(i,function(t){var e=t.axis.grid.model;o.set(e.id,e),s[e.id]=!0}),$(r,function(t){o.set(t.id,t),a[t.id]=!0,s[t.id]=!0}),o.each(function(t){var r=[];$(t.coordinateSystem.getCartesians(),function(t,e){(J(n,t.getAxis("x").model)>=0||J(i,t.getAxis("y").model)>=0)&&r.push(t)}),e.push({panelId:"grid--"+t.id,gridModel:t,coordSysModel:t,coordSys:r[0],coordSyses:r,getPanelRect:zG.grid,xAxisDeclared:a[t.id],yAxisDeclared:s[t.id]})}))},geo:function(t,e){$(t.geoModels,function(t){var n=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:n,coordSyses:[n],getPanelRect:zG.geo})})}},GG=[function(t,e){var n=t.xAxisModel,i=t.yAxisModel,r=t.gridModel;return!r&&n&&(r=n.axis.grid.model),!r&&i&&(r=i.axis.grid.model),r&&r===e.gridModel},function(t,e){var n=t.geoModel;return n&&n===e.geoModel}],zG={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(Ec(t)),e}},OG={lineX:at(BG,0),lineY:at(BG,1),rect:function(t,e,n,i){var r=t?e.pointToData([n[0][0],n[1][0]],i):e.dataToPoint([n[0][0],n[1][0]],i),o=t?e.pointToData([n[0][1],n[1][1]],i):e.dataToPoint([n[0][1],n[1][1]],i),a=[LG([r[0],o[0]]),LG([r[1],o[1]])];return{values:a,xyMinMax:a}},polygon:function(t,e,n,i){var r=[[1/0,-1/0],[1/0,-1/0]];return{values:tt(n,function(n){var o=t?e.pointToData(n,i):e.dataToPoint(n,i);return r[0][0]=Math.min(r[0][0],o[0]),r[1][0]=Math.min(r[1][0],o[1]),r[0][1]=Math.max(r[0][1],o[0]),r[1][1]=Math.max(r[1][1],o[1]),o}),xyMinMax:r}}};function BG(t,e,n,i){var r=n.getAxis(["x","y"][t]),o=LG(tt([0,1],function(t){return e?r.coordToData(r.toLocalCoord(i[t]),!0):r.toGlobalCoord(r.dataToCoord(i[t]))})),a=[];return a[t]=o,a[1-t]=[NaN,NaN],{values:o,xyMinMax:a}}var WG={lineX:at(EG,0),lineY:at(EG,1),rect:function(t,e,n){return[[t[0][0]-n[0]*e[0][0],t[0][1]-n[0]*e[0][1]],[t[1][0]-n[1]*e[1][0],t[1][1]-n[1]*e[1][1]]]},polygon:function(t,e,n){return tt(t,function(t,i){return[t[0]-n[0]*e[i][0],t[1]-n[1]*e[i][1]]})}};function EG(t,e,n,i){return[e[0]-i[t]*n[0],e[1]-i[t]*n[1]]}function XG(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var HG,jG,FG=NG,YG=$,UG=Yr+"toolbox-dataZoom_",JG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return A(e,t),e.prototype.render=function(t,e,n,i){this._brushController||(this._brushController=new qP(n.getZr()),this._brushController.on("brush",ot(this._onBrush,this)).mount()),function(t,e,n,i,r){var o=n._isZoomActive;i&&"takeGlobalCursor"===i.type&&(o="dataZoomSelect"===i.key&&i.dataZoomSelectActive);n._isZoomActive=o,t.setIconStatus("zoom",o?"emphasis":"normal");var a=new FG(KG(t),e,{include:["grid"]}).makePanelOpts(r,function(t){return t.xAxisDeclared&&!t.yAxisDeclared?"lineX":!t.xAxisDeclared&&t.yAxisDeclared?"lineY":"rect"});n._brushController.setPanels(a).enableBrush(!(!o||!a.length)&&{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()})}(t,e,this,i,n),function(t,e){t.setIconStatus("back",function(t){return TG(t).length}(e)>1?"emphasis":"normal")}(t,e)},e.prototype.onclick=function(t,e,n){QG[n].call(this)},e.prototype.remove=function(t,e){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,e){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var e=t.areas;if(t.isEnd&&e.length){var n={},i=this.ecModel;this._brushController.updateCovers([]),new FG(KG(this.model),i,{include:["grid"]}).matchOutputRanges(e,i,function(t,e,n){if("cartesian2d"===n.type){var i=t.brushType;"rect"===i?(r("x",n,e[0]),r("y",n,e[1])):r({lineX:"x",lineY:"y"}[i],n,e)}}),function(t,e){var n=TG(t);MG(e,function(e,i){for(var r=n.length-1;r>=0&&!n[r][i];r--);if(r<0){var o=t.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(o){var a=o.getPercentRange();n[0][i]={dataZoomId:i,start:a[0],end:a[1]}}}}),n.push(e)}(i,n),this._dispatchZoomAction(n)}function r(t,e,r){var o=e.getAxis(t),a=o.model,s=function(t,e,n){var i;return n.eachComponent({mainType:"dataZoom",subType:"select"},function(n){n.getAxisModel(t,e.componentIndex)&&(i=n)}),i}(t,a,i),l=s.findRepresentativeAxisProxy(a).getMinMaxSpan();null==l.minValueSpan&&null==l.maxValueSpan||(r=JT(0,r.slice(),o.scale.getExtent(),0,l.minValueSpan,l.maxValueSpan)),s&&(n[s.id]={dataZoomId:s.id,startValue:r[0],endValue:r[1]})}},e.prototype._dispatchZoomAction=function(t){var e=[];YG(t,function(t,n){e.push(X(t))}),e.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:e})},e.getDefaultOption=function(t){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocale(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},e}(aG),QG={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(function(t){var e=TG(t),n=e[e.length-1];e.length>1&&e.pop();var i={};return MG(n,function(t,n){for(var r=e.length-1;r>=0;r--)if(t=e[r][n]){i[n]=t;break}}),i}(this.ecModel))}};function KG(t){var e={xAxisIndex:t.get("xAxisIndex",!0),yAxisIndex:t.get("yAxisIndex",!0),xAxisId:t.get("xAxisId",!0),yAxisId:t.get("yAxisId",!0)};return null==e.xAxisIndex&&null==e.xAxisId&&(e.xAxisIndex="all"),null==e.yAxisIndex&&null==e.yAxisId&&(e.yAxisIndex="all"),e}HG="dataZoom",jG=function(t){var e=t.getComponent("toolbox",0),n=["feature","dataZoom"];if(e&&null!=e.get(n)){var i=e.getModel(n),r=[],o=so(t,KG(i));return YG(o.xAxisModels,function(t){return a(t,"xAxis","xAxisIndex")}),YG(o.yAxisModels,function(t){return a(t,"yAxis","yAxisIndex")}),r}function a(t,e,n){var o=t.componentIndex,a={type:"select",$fromToolbox:!0,filterMode:i.get("filterMode",!0)||"filter",id:UG+e+o};a[n]=o,r.push(a)}},wt(null==up.get(HG)&&jG),up.set(HG,jG);var qG=JG;var $G=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return A(e,t),e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(Xd);function tz(t){var e=t.get("confine");return null!=e?!!e:"richText"===t.get("renderMode")}function ez(t){if(M.domSupported)for(var e=document.documentElement.style,n=0,i=t.length;n<i;n++)if(t[n]in e)return t[n]}var nz=ez(["transform","webkitTransform","OTransform","MozTransform","msTransform"]);function iz(t,e){if(!t)return e;e=yd(e,!0);var n=t.indexOf(e);return(t=-1===n?e:"-"+t.slice(0,n)+"-"+e).toLowerCase()}function rz(t,e){var n=t.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(t);return n?e?n[e]:n:null}var oz=iz(ez(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),"transition"),az=iz(nz,"transform"),sz="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(M.transform3dSupported?"will-change:transform;":"");function lz(t,e,n){var i=t.toFixed(0)+"px",r=e.toFixed(0)+"px";if(!M.transformSupported)return n?"top:"+r+";left:"+i+";":[["top",r],["left",i]];var o=M.transform3dSupported,a="translate"+(o?"3d":"")+"("+i+","+r+(o?",0":"")+")";return n?"top:0;left:0;"+az+":"+a+";":[["top",0],["left",0],[nz,a]]}function uz(t,e,n){var i=[],r=t.get("transitionDuration"),o=t.get("backgroundColor"),a=t.get("shadowBlur"),s=t.get("shadowColor"),l=t.get("shadowOffsetX"),u=t.get("shadowOffsetY"),c=t.getModel("textStyle"),h=af(t,"html"),d=l+"px "+u+"px "+a+"px "+s;return i.push("box-shadow:"+d),e&&r&&i.push(function(t,e){var n=" "+t/2+"s cubic-bezier(0.23,1,0.32,1)",i="opacity"+n+",visibility"+n;return e||(n=" "+t+"s cubic-bezier(0.23,1,0.32,1)",i+=M.transformSupported?","+az+n:",left"+n+",top"+n),oz+":"+i}(r,n)),o&&(M.canvasSupported?i.push("background-color:"+o):(i.push("background-color:#"+An(o)),i.push("filter:alpha(opacity=70)"))),$(["width","color","radius"],function(e){var n="border-"+e,r=yd(n),o=t.get(r);null!=o&&i.push(n+":"+o+("color"===e?"":"px"))}),i.push(function(t){var e=[],n=t.get("fontSize"),i=t.getTextColor();i&&e.push("color:"+i),e.push("font:"+t.getFont()),n&&e.push("line-height:"+Math.round(3*n/2)+"px");var r=t.get("textShadowColor"),o=t.get("textShadowBlur")||0,a=t.get("textShadowOffsetX")||0,s=t.get("textShadowOffsetY")||0;return r&&o&&e.push("text-shadow:"+a+"px "+s+"px "+o+"px "+r),$(["decoration","align"],function(n){var i=t.get(n);i&&e.push("text-"+n+":"+i)}),e.join(";")}(c)),null!=h&&i.push("padding:"+md(h).join("px ")+"px"),i.join(";")+";"}function cz(t,e,n,i,r){var o=e&&e.painter;if(n){var a=o&&o.getViewportRoot();a&&function(t,e,n,i,r){fe(ge,e,i,r,!0)&&fe(t,n,ge[0],ge[1])}(t,a,document.body,i,r)}else{t[0]=i,t[1]=r;var s=o&&o.getViewportRootOffset();s&&(t[0]+=s.offsetLeft,t[1]+=s.offsetTop)}t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var hz=function(){function t(t,e,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,M.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var r=this._zr=e.getZr(),o=this._appendToBody=n&&n.appendToBody;cz(this._styleCoord,r,o,e.getWidth()/2,e.getHeight()/2),o?document.body.appendChild(i):t.appendChild(i),this._container=t;var a=this;i.onmouseenter=function(){a._enterable&&(clearTimeout(a._hideTimeout),a._show=!0),a._inContent=!0},i.onmousemove=function(t){if(t=t||window.event,!a._enterable){var e=r.handler;_e(r.painter.getViewportRoot(),t,!0),e.dispatch("mousemove",t)}},i.onmouseleave=function(){a._inContent=!1,a._enterable&&a._show&&a.hideLater(a._hideDelay)}}return t.prototype.update=function(t){var e=this._container,n=rz(e,"position"),i=e.style;"absolute"!==i.position&&"absolute"!==n&&(i.position="relative"),t.get("alwaysShowContent")&&this._moveIfResized(),this.el.className=t.get("className")||""},t.prototype.show=function(t,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,i=n.style,r=this._styleCoord;n.innerHTML?i.cssText=sz+uz(t,!this._firstShow,this._longHide)+lz(r[0],r[1],!0)+"border-color:"+Dd(e)+";"+(t.get("extraCssText")||"")+";pointer-event:"+(this._enterable?"auto":"none"):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},t.prototype.setContent=function(t,e,n,i,r){if(null!=t){var o=this.el;if(ut(r)&&"item"===n.get("trigger")&&!tz(n)&&(t+=function(t,e,n){if(!ut(n)||"inside"===n)return"";e=Dd(e);var i,r=i="left"===(i=n)?"right":"right"===i?"left":"top"===i?"bottom":"top",o=r+":-6px;",a=az+":";J(["left","right"],r)>-1?(o+="top:50%",a+="translateY(-50%) rotate("+("left"===r?-225:-45)+"deg)"):(o+="left:50%",a+="translateX(-50%) rotate("+("top"===r?225:45)+"deg)");var s=e+" solid 1px;";return'<div style="'+["position:absolute;width:10px;height:10px;",o+";"+a+";","border-bottom:"+s,"border-right:"+s,"background-color:"+t+";","box-shadow:8px 8px 16px -3px #000;"].join("")+'"></div>'}(n.get("backgroundColor"),i,r)),ut(t))o.innerHTML=t;else if(t){o.innerHTML="",st(t)||(t=[t]);for(var a=0;a<t.length;a++)ft(t[a])&&t[a].parentNode!==o&&o.appendChild(t[a])}}},t.prototype.setEnterable=function(t){this._enterable=t},t.prototype.getSize=function(){var t=this.el;return[t.clientWidth,t.clientHeight]},t.prototype.moveTo=function(t,e){var n=this._styleCoord;if(cz(n,this._zr,this._appendToBody,t,e),null!=n[0]&&null!=n[1]){var i=this.el.style;$(lz(n[0],n[1]),function(t){i[t[0]]=t[1]})}},t.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},t.prototype.hide=function(){var t=this,e=this.el.style;e.visibility="hidden",e.opacity="0",M.transform3dSupported&&(e.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},t.prototype.hideLater=function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(ot(this.hide,this),t)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},t.prototype.getOuterSize=function(){var t=this.el.clientWidth,e=this.el.clientHeight,n=rz(this.el);return n&&(t+=parseInt(n.borderLeftWidth,10)+parseInt(n.borderRightWidth,10),e+=parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10)),{width:t,height:e}},t}();function dz(t){return Math.max(0,t)}function pz(t){var e=dz(t.shadowBlur||0),n=dz(t.shadowOffsetX||0),i=dz(t.shadowOffsetY||0);return{left:dz(e-n),right:dz(e+n),top:dz(e-i),bottom:dz(e+i)}}function gz(t,e,n,i){t[0]=n,t[1]=i,t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var fz=function(){function t(t){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=t.getZr(),gz(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return t.prototype.update=function(t){t.get("alwaysShowContent")&&this._moveIfResized()},t.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},t.prototype.setContent=function(t,e,n,i,r){dt(t)&&pd(""),this.el&&this._zr.remove(this.el);var o=n.getModel("textStyle");this.el=new qs({style:{rich:e.richTextStyles,text:t,lineHeight:22,backgroundColor:n.get("backgroundColor"),borderRadius:n.get("borderRadius"),borderWidth:1,borderColor:i,shadowColor:n.get("shadowColor"),shadowBlur:n.get("shadowBlur"),shadowOffsetX:n.get("shadowOffsetX"),shadowOffsetY:n.get("shadowOffsetY"),textShadowColor:o.get("textShadowColor"),textShadowBlur:o.get("textShadowBlur")||0,textShadowOffsetX:o.get("textShadowOffsetX")||0,textShadowOffsetY:o.get("textShadowOffsetY")||0,fill:n.get(["textStyle","color"]),padding:af(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),this._zr.add(this.el);var a=this;this.el.on("mouseover",function(){a._enterable&&(clearTimeout(a._hideTimeout),a._show=!0),a._inContent=!0}),this.el.on("mouseout",function(){a._enterable&&a._show&&a.hideLater(a._hideDelay),a._inContent=!1})},t.prototype.setEnterable=function(t){this._enterable=t},t.prototype.getSize=function(){var t=this.el,e=this.el.getBoundingRect(),n=pz(t.style);return[e.width+n.left+n.right,e.height+n.top+n.bottom]},t.prototype.moveTo=function(t,e){var n=this.el;if(n){var i=this._styleCoord;gz(i,this._zr,t,e),t=i[0],e=i[1];var r=n.style,o=dz(r.borderWidth||0),a=pz(r);n.x=t+o+a.left,n.y=e+o+a.top,n.markRedraw()}},t.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},t.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},t.prototype.hideLater=function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(ot(this.hide,this),t)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.getOuterSize=function(){var t=this.getSize();return{width:t[0],height:t[1]}},t.prototype.dispose=function(){this._zr.remove(this.el)},t}(),yz=ot,mz=$,vz=br,Iz=new Ws({shape:{x:-1,y:-1,width:2,height:2}});function Cz(t,e,n){var i,r=e.ecModel;n?(i=new Mh(n,r,r),i=new Mh(e.option,i,r)):i=e;for(var o=t.length-1;o>=0;o--){var a=t[o];a&&(a instanceof Mh&&(a=a.get("tooltip",!0)),ut(a)&&(a={formatter:a}),a&&(i=new Mh(a,i,r)))}return i}function xz(t,e){return t.dispatchAction||ot(e.dispatchAction,e)}function Az(t){return"center"===t||"middle"===t}var _z=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return A(e,t),e.prototype.init=function(t,e){if(!M.node){var n,i=t.getComponent("tooltip"),r=i.get("renderMode");this._renderMode="auto"===(n=r)?M.domSupported?"html":"richText":n||"html",this._tooltipContent="richText"===this._renderMode?new fz(e):new hz(e.getDom(),e,{appendToBody:i.get("appendToBody",!0)})}},e.prototype.render=function(t,e,n){if(!M.node){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=n,this._alwaysShowContent=t.get("alwaysShowContent");var i=this._tooltipContent;i.update(t),i.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow()}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel.get("triggerOn");dR("itemTooltip",this._api,yz(function(e,n,i){"none"!==t&&(t.indexOf(e)>=0?this._tryShow(n,i):"leave"===e&&this._hide(i))},this))},e.prototype._keepShow=function(){var t=this._tooltipModel,e=this._ecModel,n=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==t.get("triggerOn")){var i=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!n.isDisposed()&&i.manuallyShowTip(t,e,n,{x:i._lastX,y:i._lastY,dataByCoordSys:i._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(t,e,n,i){if(i.from!==this.uid&&!M.node){var r=xz(i,n);this._ticket="";var o=i.dataByCoordSys,a=function(t,e,n){var i=lo(t).queryOptionMap,r=i.keys()[0];if(!r||"series"===r)return;var o,a=ho(e,r,i.get(r),{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];if(!a)return;if(n.getViewOfComponentModel(a).group.traverse(function(e){var n=$s(e).tooltipConfig;if(n&&n.name===t.name)return o=e,!0}),o)return{componentMainType:r,componentIndex:a.componentIndex,el:o}}(i,e,n);if(a){var s=a.el.getBoundingRect().clone();s.applyTransform(a.el.transform),this._tryShow({offsetX:s.x+s.width/2,offsetY:s.y+s.height/2,target:a.el,position:i.position,positionDefault:"bottom"},r)}else if(i.tooltip&&null!=i.x&&null!=i.y){var l=Iz;l.x=i.x,l.y=i.y,l.update(),$s(l).tooltipConfig={name:null,option:i.tooltip},this._tryShow({offsetX:i.x,offsetY:i.y,target:l},r)}else if(o)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:o,tooltipOption:i.tooltipOption},r);else if(null!=i.seriesIndex){if(this._manuallyAxisShowTip(t,e,n,i))return;var u=mR(i,e),c=u.point[0],h=u.point[1];null!=c&&null!=h&&this._tryShow({offsetX:c,offsetY:h,target:u.el,position:i.position,positionDefault:"bottom"},r)}else null!=i.x&&null!=i.y&&(n.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:n.getZr().findHover(i.x,i.y).target},r))}},e.prototype.manuallyHideTip=function(t,e,n,i){var r=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&r.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,i.from!==this.uid&&this._hide(xz(i,n))},e.prototype._manuallyAxisShowTip=function(t,e,n,i){var r=i.seriesIndex,o=i.dataIndex,a=e.getComponent("axisPointer").coordSysAxesInfo;if(null!=r&&null!=o&&null!=a){var s=e.getSeriesByIndex(r);if(s)if("axis"===Cz([s.getData().getItemModel(o),s,(s.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:r,dataIndex:o,position:i.position}),!0}},e.prototype._tryShow=function(t,e){var n=t.target;if(this._tooltipModel){this._lastX=t.offsetX,this._lastY=t.offsetY;var i=t.dataByCoordSys;if(i&&i.length)this._showAxisTooltip(i,t);else if(n){var r,o;this._lastDataByCoordSys=null,tm(n,function(t){return null!=$s(t).dataIndex?(r=t,!0):null!=$s(t).tooltipConfig?(o=t,!0):void 0},!0),r?this._showSeriesItemTooltip(t,r,e):o?this._showComponentItemTooltip(t,o,e):this._hide(e)}else this._lastDataByCoordSys=null,this._hide(e)}},e.prototype._showOrMove=function(t,e){var n=t.get("showDelay");e=ot(e,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(e,n):e()},e.prototype._showAxisTooltip=function(t,e){var n=this._ecModel,i=this._tooltipModel,r=[e.offsetX,e.offsetY],o=Cz([e.tooltipOption],i),a=this._renderMode,s=[],l=Kg("section",{blocks:[],noHeader:!0}),u=[],c=new sf;mz(t,function(t){mz(t.dataByAxis,function(t){var e=n.getComponent(t.axisDim+"Axis",t.axisIndex),i=t.value;if(e&&null!=i){var r=qL(i,e.axis,n,t.seriesDataIndices,t.valueLabelOpt),o=Kg("section",{header:r,noHeader:!St(r),sortBlocks:!0,blocks:[]});l.blocks.push(o),$(t.seriesDataIndices,function(l){var h=n.getSeriesByIndex(l.seriesIndex),d=l.dataIndexInside,p=h.getDataParams(d);p.axisDim=t.axisDim,p.axisIndex=t.axisIndex,p.axisType=t.axisType,p.axisId=t.axisId,p.axisValue=Kx(e.axis,{value:i}),p.axisValueLabel=r,p.marker=c.makeTooltipMarker("item",Dd(p.color),a);var g=_g(h.formatTooltip(d,!0,null));g.markupFragment&&o.blocks.push(g.markupFragment),g.markupText&&u.push(g.markupText),s.push(p)})}})}),l.blocks.reverse(),u.reverse();var h=e.position,d=o.get("order"),p=tf(l,c,a,d,n.get("useUTC"),o.get("textStyle"));p&&u.unshift(p);var g="richText"===a?"\n\n":"<br/>",f=u.join(g);this._showOrMove(o,function(){this._updateContentNotChangedOnAxis(t)?this._updatePosition(o,h,r[0],r[1],this._tooltipContent,s):this._showTooltipContent(o,f,s,Math.random()+"",r[0],r[1],h,null,c)})},e.prototype._showSeriesItemTooltip=function(t,e,n){var i=this._ecModel,r=$s(e),o=r.seriesIndex,a=i.getSeriesByIndex(o),s=r.dataModel||a,l=r.dataIndex,u=r.dataType,c=s.getData(u),h=this._renderMode,d=t.positionDefault,p=Cz([c.getItemModel(l),s,a&&(a.coordinateSystem||{}).model],this._tooltipModel,d?{position:d}:null),g=p.get("trigger");if(null==g||"item"===g){var f=s.getDataParams(l,u),y=new sf;f.marker=y.makeTooltipMarker("item",Dd(f.color),h);var m=_g(s.formatTooltip(l,!1,u)),v=p.get("order"),I=m.markupFragment?tf(m.markupFragment,y,h,v,i.get("useUTC"),p.get("textStyle")):m.markupText,C="item_"+s.name+"_"+l;this._showOrMove(p,function(){this._showTooltipContent(p,I,f,C,t.offsetX,t.offsetY,t.position,t.target,y)}),n({type:"showTip",dataIndexInside:l,dataIndex:c.getRawIndex(l),seriesIndex:o,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,e,n){var i=$s(e),r=i.tooltipConfig.option||{};if(ut(r)){r={content:r,formatter:r}}var o=[r],a=this._ecModel.getComponent(i.componentMainType,i.componentIndex);a&&o.push(a),o.push({formatter:r.content});var s=t.positionDefault,l=Cz(o,this._tooltipModel,s?{position:s}:null),u=l.get("content"),c=Math.random()+"",h=new sf;this._showOrMove(l,function(){var n=X(l.get("formatterParams")||{});this._showTooltipContent(l,u,n,c,t.offsetX,t.offsetY,t.position,e,h)}),n({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,e,n,i,r,o,a,s,l){if(this._ticket="",t.get("showContent")&&t.get("show")){var u=this._tooltipContent,c=t.get("formatter");a=a||t.get("position");var h=e,d=this._getNearestPoint([r,o],n,t.get("trigger"),t.get("borderColor")).color;if(c&&ut(c)){var p=t.ecModel.get("useUTC"),g=st(n)?n[0]:n;h=c,g&&g.axisType&&g.axisType.indexOf("time")>=0&&(h=Jh(g.axisValue,h,p)),h=bd(h,n,!0)}else if(lt(c)){var f=yz(function(e,i){e===this._ticket&&(u.setContent(i,l,t,d,a),this._updatePosition(t,a,r,o,u,n,s))},this);this._ticket=i,h=c(n,i,f)}u.setContent(h,l,t,d,a),u.show(t,d),this._updatePosition(t,a,r,o,u,n,s)}},e.prototype._getNearestPoint=function(t,e,n,i){return"axis"===n||st(e)?{color:i||("html"===this._renderMode?"#fff":"none")}:st(e)?void 0:{color:i||e.color||e.borderColor}},e.prototype._updatePosition=function(t,e,n,i,r,o,a){var s=this._api.getWidth(),l=this._api.getHeight();e=e||t.get("position");var u=r.getSize(),c=t.get("align"),h=t.get("verticalAlign"),d=a&&a.getBoundingRect().clone();if(a&&d.applyTransform(a.transform),lt(e)&&(e=e([n,i],o,r.el,d,{viewSize:[s,l],contentSize:u.slice()})),st(e))n=vz(e[0],s),i=vz(e[1],l);else if(dt(e)){var p=e;p.width=u[0],p.height=u[1];var g=Rd(p,{width:s,height:l});n=g.x,i=g.y,c=null,h=null}else if(ut(e)&&a){var f=function(t,e,n){var i=n[0],r=n[1],o=0,a=0,s=e.width,l=e.height;switch(t){case"inside":o=e.x+s/2-i/2,a=e.y+l/2-r/2;break;case"top":o=e.x+s/2-i/2,a=e.y-r-10;break;case"bottom":o=e.x+s/2-i/2,a=e.y+l+10;break;case"left":o=e.x-i-10-5,a=e.y+l/2-r/2;break;case"right":o=e.x+s+10+5,a=e.y+l/2-r/2}return[o,a]}(e,d,u);n=f[0],i=f[1]}else{f=function(t,e,n,i,r,o,a){var s=n.getOuterSize(),l=s.width,u=s.height;null!=o&&(t+l+o+2>i?t-=l+o:t+=o);null!=a&&(e+u+a>r?e-=u+a:e+=a);return[t,e]}(n,i,r,s,l,c?null:20,h?null:20);n=f[0],i=f[1]}if(c&&(n-=Az(c)?u[0]/2:"right"===c?u[0]:0),h&&(i-=Az(h)?u[1]/2:"bottom"===h?u[1]:0),tz(t)){f=function(t,e,n,i,r){var o=n.getOuterSize(),a=o.width,s=o.height;return t=Math.min(t+a,i)-a,e=Math.min(e+s,r)-s,t=Math.max(t,0),e=Math.max(e,0),[t,e]}(n,i,r,s,l);n=f[0],i=f[1]}r.moveTo(n,i)},e.prototype._updateContentNotChangedOnAxis=function(t){var e=this._lastDataByCoordSys,n=!!e&&e.length===t.length;return n&&mz(e,function(e,i){var r=e.dataByAxis||[],o=(t[i]||{}).dataByAxis||[];(n=n&&r.length===o.length)&&mz(r,function(t,e){var i=o[e]||{},r=t.seriesDataIndices||[],a=i.seriesDataIndices||[];(n=n&&t.value===i.value&&t.axisType===i.axisType&&t.axisId===i.axisId&&r.length===a.length)&&mz(r,function(t,e){var i=a[e];n=n&&t.seriesIndex===i.seriesIndex&&t.dataIndex===i.dataIndex})})}),this._lastDataByCoordSys=t,!!n},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,e){M.node||(this._tooltipContent.dispose(),fR("itemTooltip",e))},e.type="tooltip",e}(xf);var bz=["rect","polygon","keep","clear"];function wz(t,e){var n=Ur(t?t.brush:[]);if(n.length){var i=[];$(n,function(t){var e=t.hasOwnProperty("toolbox")?t.toolbox:[];e instanceof Array&&(i=i.concat(e))});var r=t&&t.toolbox;st(r)&&(r=r[0]),r||(r={feature:{}},t.toolbox=[r]);var o,a,s=r.feature||(r.feature={}),l=s.brush||(s.brush={}),u=l.type||(l.type=[]);u.push.apply(u,i),a={},$(o=u,function(t){a[t]=1}),o.length=0,$(a,function(t,e){o.push(e)}),e&&!u.length&&u.push.apply(u,bz)}}var Sz=$;function Mz(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!0}function Dz(t,e,n){var i={};return Sz(e,function(e){var r,o=i[e]=((r=function(){}).prototype.__hidden=r.prototype,new r);Sz(t[e],function(t,i){if(qM.isValidType(i)){var r={type:i,visual:t};n&&n(r,e),o[i]=new qM(r),"opacity"===i&&((r=X(r)).type="colorAlpha",o.__hidden.__alphaForOpacity=new qM(r))}})}),i}function Tz(t,e,n){var i;$(n,function(t){e.hasOwnProperty(t)&&Mz(e[t])&&(i=!0)}),i&&$(n,function(n){e.hasOwnProperty(n)&&Mz(e[n])?t[n]=X(e[n]):delete t[n]})}var Pz={lineX:Zz(0),lineY:Zz(1),rect:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])},rect:function(t,e,n){return t&&n.boundingRect.intersect(t)}},polygon:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])&&uv(n.range,t[0],t[1])},rect:function(t,e,n){var i=n.range;if(!t||i.length<=1)return!1;var r=t.x,o=t.y,a=t.width,s=t.height,l=i[0];return!!(uv(i,r,o)||uv(i,r+a,o)||uv(i,r,o+s)||uv(i,r+a,o+s)||Ei.create(t).contain(l[0],l[1])||Qc(r,o,r+a,o,i)||Qc(r,o,r,o+s,i)||Qc(r+a,o,r+a,o+s,i)||Qc(r,o+s,r+a,o+s,i))||void 0}}};function Zz(t){var e=["x","y"],n=["width","height"];return{point:function(e,n,i){if(e){var r=i.range;return kz(e[t],r)}},rect:function(i,r,o){if(i){var a=o.range,s=[i[e[t]],i[e[t]]+i[n[t]]];return s[1]<s[0]&&s.reverse(),kz(s[0],a)||kz(s[1],a)||kz(a[0],s)||kz(a[1],s)}}}}function kz(t,e){return e[0]<=t&&t<=e[1]}var Nz=["inBrush","outOfBrush"],Lz="__ecBrushSelect",Rz="__ecInBrushSelectEvent";function Vz(t){t.eachComponent({mainType:"brush"},function(e){(e.brushTargetManager=new FG(e.option,t)).setInputRanges(e.areas,t)})}function Gz(t,e,n){var i,r,o=[];t.eachComponent({mainType:"brush"},function(t){n&&"takeGlobalCursor"===n.type&&t.setBrushOption("brush"===n.key?n.brushOption:{brushType:!1})}),Vz(t),t.eachComponent({mainType:"brush"},function(e,n){var a={brushId:e.id,brushIndex:n,brushName:e.name,areas:X(e.areas),selected:[]};o.push(a);var s=e.option,l=s.brushLink,u=[],c=[],h=[],d=!1;n||(i=s.throttleType,r=s.throttleDelay);var p=tt(e.areas,function(t){var e=Bz[t.brushType],n=Y({boundingRect:e?e(t):void 0},t);return n.selectors=function(t){var e=t.brushType,n={point:function(i){return Pz[e].point(i,n,t)},rect:function(i){return Pz[e].rect(i,n,t)}};return n}(n),n}),g=Dz(e.option,Nz,function(t){t.mappingMethod="fixed"});function f(t){return"all"===l||!!u[t]}function y(t){return!!t.length}st(l)&&$(l,function(t){u[t]=1}),t.eachSeries(function(n,i){var r=h[i]=[];"parallel"===n.subType?function(t,e){var n=t.coordinateSystem;d=d||n.hasAxisBrushed(),f(e)&&n.eachActiveState(t.getData(),function(t,e){"active"===t&&(c[e]=1)})}(n,i):function(n,i,r){if(!n.brushSelector||function(t,e){var n=t.option.seriesIndex;return null!=n&&"all"!==n&&(st(n)?J(n,e)<0:e!==n)}(e,i))return;if($(p,function(i){e.brushTargetManager.controlSeries(i,n,t)&&r.push(i),d=d||y(r)}),f(i)&&y(r)){var o=n.getData();o.each(function(t){Oz(n,r,o,t)&&(c[t]=1)})}}(n,i,r)}),t.eachSeries(function(t,e){var n={seriesId:t.id,seriesIndex:e,seriesName:t.name,dataIndex:[]};a.selected.push(n);var i=h[e],r=t.getData(),o=f(e)?function(t){return c[t]?(n.dataIndex.push(r.getRawIndex(t)),"inBrush"):"outOfBrush"}:function(e){return Oz(t,i,r,e)?(n.dataIndex.push(r.getRawIndex(e)),"inBrush"):"outOfBrush"};(f(e)?d:y(i))&&function(t,e,n,i,r,o){var a,s={};function l(t){return fy(n,a,t)}function u(t,e){my(n,a,t,e)}function c(t,c){a=null==o?t:c;var h=n.getRawDataItem(a);if(!h||!1!==h.visualMap)for(var d=i.call(r,t),p=e[d],g=s[d],f=0,y=g.length;f<y;f++){var m=g[f];p[m]&&p[m].applyVisual(t,l,u)}}$(t,function(t){var n=qM.prepareVisualTypes(e[t]);s[t]=n}),null==o?n.each(c):n.each([o],c)}(Nz,g,r,o)})}),function(t,e,n,i,r){if(!r)return;var o=t.getZr();if(o[Rz])return;o[Lz]||(o[Lz]=zz);Vf(o,Lz,n,e)(t,i)}(e,i,r,o,n)}function zz(t,e){if(!t.isDisposed()){var n=t.getZr();n[Rz]=!0,t.dispatchAction({type:"brushSelect",batch:e}),n[Rz]=!1}}function Oz(t,e,n,i){for(var r=0,o=e.length;r<o;r++){var a=e[r];if(t.brushSelector(i,n,a.selectors,a))return!0}}var Bz={rect:function(t){return Wz(t.range)},polygon:function(t){for(var e,n=t.range,i=0,r=n.length;i<r;i++){e=e||[[1/0,-1/0],[1/0,-1/0]];var o=n[i];o[0]<e[0][0]&&(e[0][0]=o[0]),o[0]>e[0][1]&&(e[0][1]=o[0]),o[1]<e[1][0]&&(e[1][0]=o[1]),o[1]>e[1][1]&&(e[1][1]=o[1])}return e&&Wz(e)}};function Wz(t){return new Ei(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var Ez=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return A(e,t),e.prototype.init=function(t,e){this.ecModel=t,this.api=e,this.model,(this._brushController=new qP(e.getZr())).on("brush",ot(this._onBrush,this)).mount()},e.prototype.render=function(t,e,n,i){this.model=t,this._updateController(t,e,n,i)},e.prototype.updateTransform=function(t,e,n,i){Vz(e),this._updateController(t,e,n,i)},e.prototype.updateVisual=function(t,e,n,i){this.updateTransform(t,e,n,i)},e.prototype.updateView=function(t,e,n,i){this._updateController(t,e,n,i)},e.prototype._updateController=function(t,e,n,i){(!i||i.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(n)).enableBrush(t.brushOption).updateCovers(t.areas.slice())},e.prototype.dispose=function(){this._brushController.dispose()},e.prototype._onBrush=function(t){var e=this.model.id,n=this.model.brushTargetManager.setOutputRanges(t.areas,this.ecModel);(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:e,areas:X(n),$from:e}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:e,areas:X(n),$from:e})},e.type="brush",e}(xf);function Xz(t,e){return H({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new Mh(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},e,!0)}var Hz=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.areas=[],n.brushOption={},n}return A(e,t),e.prototype.optionUpdated=function(t,e){var n=this.option;!e&&Tz(n,t,["inBrush","outOfBrush"]);var i=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:"#ddd"},i.hasOwnProperty("liftZ")||(i.liftZ=5)},e.prototype.setAreas=function(t){t&&(this.areas=tt(t,function(t){return Xz(this.option,t)},this))},e.prototype.setBrushOption=function(t){this.brushOption=Xz(this.option,t),this.brushType=this.brushOption.brushType},e.type="brush",e.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],e.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},e}(Xd),jz=["rect","polygon","lineX","lineY","keep","clear"],Fz=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return A(e,t),e.prototype.render=function(t,e,n){var i,r,o;e.eachComponent({mainType:"brush"},function(t){i=t.brushType,r=t.brushOption.brushMode||"single",o=o||!!t.areas.length}),this._brushType=i,this._brushMode=r,$(t.get("type",!0),function(e){t.setIconStatus(e,("keep"===e?"multiple"===r:"clear"===e?o:e===i)?"emphasis":"normal")})},e.prototype.updateView=function(t,e,n){this.render(t,e,n)},e.prototype.getIcons=function(){var t=this.model,e=t.get("icon",!0),n={};return $(t.get("type",!0),function(t){e[t]&&(n[t]=e[t])}),n},e.prototype.onclick=function(t,e,n){var i=this._brushType,r=this._brushMode;"clear"===n?(e.dispatchAction({type:"axisAreaSelect",intervals:[]}),e.dispatchAction({type:"brush",command:"clear",areas:[]})):e.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===n?i:i!==n&&n,brushMode:"keep"===n?"multiple"===r?"single":"multiple":r}})},e.getDefaultOption=function(t){return{show:!0,type:jz.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:t.getLocale(["toolbox","brush","title"])}},e}(aG);var Yz=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode={type:"box",ignoreSize:!0},n}return A(e,t),e.type="title",e.defaultOption={zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(Xd),Uz=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return A(e,t),e.prototype.render=function(t,e,n){if(this.group.removeAll(),t.get("show")){var i=this.group,r=t.getModel("textStyle"),o=t.getModel("subtextStyle"),a=t.get("textAlign"),s=xt(t.get("textBaseline"),t.get("textVerticalAlign")),l=new qs({style:oh(r,{text:t.get("text"),fill:r.getTextColor()},{disableBox:!0}),z2:10}),u=l.getBoundingRect(),c=t.get("subtext"),h=new qs({style:oh(o,{text:c,fill:o.getTextColor(),y:u.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),d=t.get("link"),p=t.get("sublink"),g=t.get("triggerEvent",!0);l.silent=!d&&!g,h.silent=!p&&!g,d&&l.on("click",function(){Td(d,"_"+t.get("target"))}),p&&h.on("click",function(){Td(p,"_"+t.get("subtarget"))}),$s(l).eventData=$s(h).eventData=g?{componentType:"title",componentIndex:t.componentIndex}:null,i.add(l),c&&i.add(h);var f=i.getBoundingRect(),y=t.getBoxLayoutParams();y.width=f.width,y.height=f.height;var m=Rd(y,{width:n.getWidth(),height:n.getHeight()},t.get("padding"));a||("middle"===(a=t.get("left")||t.get("right"))&&(a="center"),"right"===a?m.x+=m.width:"center"===a&&(m.x+=m.width/2)),s||("center"===(s=t.get("top")||t.get("bottom"))&&(s="middle"),"bottom"===s?m.y+=m.height:"middle"===s&&(m.y+=m.height/2),s=s||"top"),i.x=m.x,i.y=m.y,i.markRedraw();var v={align:a,verticalAlign:s};l.setStyle(v),h.setStyle(v),f=i.getBoundingRect();var I=m.margin,C=t.getItemStyle(["color","opacity"]);C.fill=t.get("backgroundColor");var x=new Ws({shape:{x:f.x-I[3],y:f.y-I[0],width:f.width+I[1]+I[3],height:f.height+I[0]+I[2],r:t.get("borderRadius")},style:C,subPixelOptimize:!0,silent:!0});i.add(x)}},e.type="title",e}(xf);var Jz=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode="box",n}return A(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n),this._initData()},e.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(t){null==t&&(t=this.option.currentIndex);var e=this._data.count();this.option.loop?t=(t%e+e)%e:(t>=e&&(t=e-1),t<0&&(t=0)),this.option.currentIndex=t},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(t){this.option.autoPlay=!!t},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var t,e=this.option,n=e.data||[],i=e.axisType,r=this._names=[];"category"===i?(t=[],$(n,function(e,n){var i,o=eo(Kr(e),"");dt(e)?(i=X(e)).value=n:i=n,t.push(i),r.push(o)})):t=n;var o={category:"ordinal",time:"time",value:"number"}[i]||"number";(this._data=new VC([{name:"value",type:o}],this)).initData(t,r)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if("category"===this.get("axisType"))return this._names.slice()},e.type="timeline",e.defaultOption={zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(Xd),Qz=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return A(e,t),e.type="timeline.slider",e.defaultOption=Ph(Jz.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}(Jz);K(Qz,Ag.prototype);var Kz=Qz,qz=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return A(e,t),e.type="timeline",e}(xf),$z=function(t){function e(e,n,i,r){var o=t.call(this,e,n,i)||this;return o.type=r||"value",o}return A(e,t),e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return"horizontal"===this.model.get("orient")},e}(vA),tO=Math.PI,eO=oo();function nO(t,e,n,i,r,o){var a=e.get("color");r?(r.setColor(a),n.add(r),o&&o.onUpdate(r)):((r=hm(t.get("symbol"),-1,-1,2,2,a)).setStyle("strokeNoScale",!0),n.add(r),o&&o.onCreate(r));var s=e.getItemStyle(["color"]);r.setStyle(s),i=H({rectHover:!0,z2:100},i,!0);var l=t.get("symbolSize");l=l instanceof Array?l.slice():[+l,+l],i.scaleX=l[0]/2,i.scaleY=l[1]/2;var u=t.get("symbolOffset");u&&(i.x=i.x||0,i.y=i.y||0,i.x+=br(u[0],l[0]),i.y+=br(u[1],l[1]));var c=t.get("symbolRotate");return i.rotation=(c||0)*Math.PI/180||0,r.attr(i),r.updateTransform(),r}function iO(t,e,n,i,r,o){if(!t.dragging){var a=r.getModel("checkpointStyle"),s=i.dataToCoord(r.getData().get("value",n));if(o||!a.get("animation",!0))t.attr({x:s,y:0}),e&&e.attr({shape:{x2:s}});else{var l={duration:a.get("animationDuration",!0),easing:a.get("animationEasing",!0)};t.stopAnimation(null,!0),t.animateTo({x:s,y:0},l),e&&e.animateTo({shape:{x2:s}},l)}}}var rO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return A(e,t),e.prototype.init=function(t,e){this.api=e},e.prototype.render=function(t,e,n){if(this.model=t,this.api=n,this.ecModel=e,this.group.removeAll(),t.get("show",!0)){var i=this._layout(t,n),r=this._createGroup("_mainGroup"),o=this._createGroup("_labelGroup"),a=this._axis=this._createAxis(i,t);t.formatTooltip=function(t){return Kg("nameValue",{noName:!0,value:a.scale.getLabel({value:t})})},$(["AxisLine","AxisTick","Control","CurrentPointer"],function(e){this["_render"+e](i,r,a,t)},this),this._renderAxisLabel(i,o,a,t),this._position(i,t)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(t,e){var n,i,r,o,a=t.get(["label","position"]),s=t.get("orient"),l=function(t,e){return Rd(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},t.get("padding"))}(t,e),u={horizontal:"center",vertical:(n=null==a||"auto"===a?"horizontal"===s?l.y+l.height/2<e.getHeight()/2?"-":"+":l.x+l.width/2<e.getWidth()/2?"+":"-":ut(a)?{horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[s][a]:a)>=0||"+"===n?"left":"right"},c={horizontal:n>=0||"+"===n?"top":"bottom",vertical:"middle"},h={horizontal:0,vertical:tO/2},d="vertical"===s?l.height:l.width,p=t.getModel("controlStyle"),g=p.get("show",!0),f=g?p.get("itemSize"):0,y=g?p.get("itemGap"):0,m=f+y,v=t.get(["label","rotate"])||0;v=v*tO/180;var I=p.get("position",!0),C=g&&p.get("showPlayBtn",!0),x=g&&p.get("showPrevBtn",!0),A=g&&p.get("showNextBtn",!0),_=0,b=d;"left"===I||"bottom"===I?(C&&(i=[0,0],_+=m),x&&(r=[_,0],_+=m),A&&(o=[b-f,0],b-=m)):(C&&(i=[b-f,0],b-=m),x&&(r=[0,0],_+=m),A&&(o=[b-f,0],b-=m));var w=[_,b];return t.get("inverse")&&w.reverse(),{viewRect:l,mainLength:d,orient:s,rotation:h[s],labelRotation:v,labelPosOpt:n,labelAlign:t.get(["label","align"])||u[s],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||c[s],playPosition:i,prevBtnPosition:r,nextBtnPosition:o,axisExtent:w,controlSize:f,controlGap:y}},e.prototype._position=function(t,e){var n=this._mainGroup,i=this._labelGroup,r=t.viewRect;if("vertical"===t.orient){var o=[1,0,0,1,0,0],a=r.x,s=r.y+r.height;vi(o,o,[-a,-s]),Ii(o,o,-tO/2),vi(o,o,[a,s]),(r=r.clone()).applyTransform(o)}var l=y(r),u=y(n.getBoundingRect()),c=y(i.getBoundingRect()),h=[n.x,n.y],d=[i.x,i.y];d[0]=h[0]=l[0][0];var p,g=t.labelPosOpt;null==g||ut(g)?(m(h,u,l,1,p="+"===g?0:1),m(d,c,l,1,1-p)):(m(h,u,l,1,p=g>=0?0:1),d[1]=h[1]+g);function f(t){t.originX=l[0][0]-t.x,t.originY=l[1][0]-t.y}function y(t){return[[t.x,t.x+t.width],[t.y,t.y+t.height]]}function m(t,e,n,i,r){t[i]+=n[i][r]-e[i][r]}n.setPosition(h),i.setPosition(d),n.rotation=i.rotation=t.rotation,f(n),f(i)},e.prototype._createAxis=function(t,e){var n=e.getData(),i=e.get("axisType"),r=function(t,e){if(e=e||t.get("type"))switch(e){case"category":return new ox({ordinalMeta:t.getCategories(),extent:[1/0,-1/0]});case"time":return new Px({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new lx}}(e,i);r.getTicks=function(){return n.mapArray(["value"],function(t){return{value:t}})};var o=n.getDataExtent("value");r.setExtent(o[0],o[1]),r.niceTicks();var a=new $z("value",r,t.axisExtent,i);return a.model=e,a},e.prototype._createGroup=function(t){var e=this[t]=new cr;return this.group.add(e),e},e.prototype._renderAxisLine=function(t,e,n,i){var r=n.getExtent();if(i.get(["lineStyle","show"])){var o=new $u({shape:{x1:r[0],y1:0,x2:r[1],y2:0},style:F({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});e.add(o);var a=this._progressLine=new $u({shape:{x1:r[0],x2:this._currentPointer?this._currentPointer.x:r[0],y1:0,y2:0},style:Y({lineCap:"round",lineWidth:o.style.lineWidth},i.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});e.add(a)}},e.prototype._renderAxisTick=function(t,e,n,i){var r=this,o=i.getData(),a=n.scale.getTicks();this._tickSymbols=[],$(a,function(t){var a=n.dataToCoord(t.value),s=o.getItemModel(t.value),l=s.getModel("itemStyle"),u=s.getModel(["emphasis","itemStyle"]),c=s.getModel(["progress","itemStyle"]),h={x:a,y:0,onclick:ot(r._changeTimeline,r,t.value)},d=nO(s,l,e,h);d.ensureState("emphasis").style=u.getItemStyle(),d.ensureState("progress").style=c.getItemStyle(),Hl(d);var p=$s(d);s.get("tooltip")?(p.dataIndex=t.value,p.dataModel=i):p.dataIndex=p.dataModel=null,r._tickSymbols.push(d)})},e.prototype._renderAxisLabel=function(t,e,n,i){var r=this;if(n.getLabelModel().get("show")){var o=i.getData(),a=n.getViewLabels();this._tickLabels=[],$(a,function(i){var a=i.tickValue,s=o.getItemModel(a),l=s.getModel("label"),u=s.getModel(["emphasis","label"]),c=s.getModel(["progress","label"]),h=n.dataToCoord(i.tickValue),d=new qs({x:h,y:0,rotation:t.labelRotation-t.rotation,onclick:ot(r._changeTimeline,r,a),silent:!1,style:oh(l,{text:i.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});d.ensureState("emphasis").style=oh(u),d.ensureState("progress").style=oh(c),e.add(d),Hl(d),eO(d).dataIndex=a,r._tickLabels.push(d)})}},e.prototype._renderControl=function(t,e,n,i){var r=t.controlSize,o=t.rotation,a=i.getModel("controlStyle").getItemStyle(),s=i.getModel(["emphasis","controlStyle"]).getItemStyle(),l=i.getPlayState(),u=i.get("inverse",!0);function c(t,n,l,u){if(t){var c=qi(xt(i.get(["controlStyle",n+"BtnSize"]),r),r),h=function(t,e,n,i){var r=i.style,o=Jc(t.get(["controlStyle",e]),i||{},new Ei(n[0],n[1],n[2],n[3]));r&&o.setStyle(r);return o}(i,n+"Icon",[0,-c/2,c,c],{x:t[0],y:t[1],originX:r/2,originY:0,rotation:u?-o:0,rectHover:!0,style:a,onclick:l});h.ensureState("emphasis").style=s,e.add(h),Hl(h)}}c(t.nextBtnPosition,"next",ot(this._changeTimeline,this,u?"-":"+")),c(t.prevBtnPosition,"prev",ot(this._changeTimeline,this,u?"+":"-")),c(t.playPosition,l?"stop":"play",ot(this._handlePlayClick,this,!l),!0)},e.prototype._renderCurrentPointer=function(t,e,n,i){var r=i.getData(),o=i.getCurrentIndex(),a=r.getItemModel(o).getModel("checkpointStyle"),s=this,l={onCreate:function(t){t.draggable=!0,t.drift=ot(s._handlePointerDrag,s),t.ondragend=ot(s._handlePointerDragend,s),iO(t,s._progressLine,o,n,i,!0)},onUpdate:function(t){iO(t,s._progressLine,o,n,i)}};this._currentPointer=nO(a,a,this._mainGroup,{},this._currentPointer,l)},e.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},e.prototype._handlePointerDrag=function(t,e,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},e.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},e.prototype._pointerChangeTimeline=function(t,e){var n=this._toAxisCoord(t)[0],i=Sr(this._axis.getExtent().slice());n>i[1]&&(n=i[1]),n<i[0]&&(n=i[0]),this._currentPointer.x=n,this._currentPointer.markRedraw(),this._progressLine.shape.x2=n,this._progressLine.dirty();var r=this._findNearestTick(n),o=this.model;(e||r!==o.getCurrentIndex()&&o.get("realtime"))&&this._changeTimeline(r)},e.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var e=t.model;t._changeTimeline(e.getCurrentIndex()+(e.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},e.prototype._toAxisCoord=function(t){return Xc(t,this._mainGroup.getLocalTransform(),!0)},e.prototype._findNearestTick=function(t){var e,n=this.model.getData(),i=1/0,r=this._axis;return n.each(["value"],function(n,o){var a=r.dataToCoord(n),s=Math.abs(a-t);s<i&&(i=s,e=o)}),e},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(t){var e=this.model.getCurrentIndex();"+"===t?t=e+1:"-"===t&&(t=e-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},e.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),e=this._tickSymbols,n=this._tickLabels;if(e)for(var i=0;i<e.length;i++)e&&e[i]&&e[i].toggleState("progress",i<t);if(n)for(i=0;i<n.length;i++)n&&n[i]&&n[i].toggleState("progress",eO(n[i]).dataIndex<=t)},e.type="timeline.slider",e}(qz);function oO(t){var e=t&&t.timeline;st(e)||(e=e?[e]:[]),$(e,function(t){t&&function(t){var e=t.type,n={number:"value",time:"time"};n[e]&&(t.axisType=n[e],delete t.type);if(aO(t),sO(t,"controlPosition")){var i=t.controlStyle||(t.controlStyle={});sO(i,"position")||(i.position=t.controlPosition),"none"!==i.position||sO(i,"show")||(i.show=!1,delete i.position),delete t.controlPosition}$(t.data||[],function(t){dt(t)&&!st(t)&&(!sO(t,"value")&&sO(t,"name")&&(t.value=t.name),aO(t))})}(t)})}function aO(t){var e=t.itemStyle||(t.itemStyle={}),n=e.emphasis||(e.emphasis={}),i=t.label||t.label||{},r=i.normal||(i.normal={}),o={normal:1,emphasis:1};$(i,function(t,e){o[e]||sO(r,e)||(r[e]=t)}),n.label&&!sO(i,"emphasis")&&(i.emphasis=n.label,delete n.label)}function sO(t,e){return t.hasOwnProperty(e)}function lO(t,e){if(!t)return!1;for(var n=st(t)?t:[t],i=0;i<n.length;i++)if(n[i]&&n[i][e])return!0;return!1}function uO(t){Jr(t,"label",["show"])}var cO=oo(),hO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.createdBySelf=!1,n}return A(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n),this._mergeOption(t,n,!1,!0)},e.prototype.isAnimationEnabled=function(){if(M.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},e.prototype.mergeOption=function(t,e){this._mergeOption(t,e,!1,!1)},e.prototype._mergeOption=function(t,e,n,i){var r=this.mainType;n||e.eachSeries(function(t){var n=t.get(this.mainType,!0),o=cO(t)[r];n&&n.data?(o?o._mergeOption(n,e,!0):(i&&uO(n),$(n.data,function(t){t instanceof Array?(uO(t[0]),uO(t[1])):uO(t)}),F(o=this.createMarkerModelFromSeries(n,this,e),{mainType:this.mainType,seriesIndex:t.seriesIndex,name:t.name,createdBySelf:!0}),o.__hostSeries=t),cO(t)[r]=o):cO(t)[r]=null},this)},e.prototype.formatTooltip=function(t,e,n){var i=this.getData(),r=this.getRawValue(t),o=i.getName(t);return Kg("section",{header:this.name,blocks:[Kg("nameValue",{name:o,value:r,noName:!o,noValue:null==r})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(t){this._data=t},e.getMarkerModelFromSeries=function(t,e){return cO(t)[e]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(Xd);K(hO,Ag.prototype);var dO=hO,pO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return A(e,t),e.prototype.createMarkerModelFromSeries=function(t,n,i){return new e(t,n,i)},e.type="markPoint",e.defaultOption={zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},e}(dO);function gO(t,e,n,i,r,o){var a=[],s=HC(e,i)?e.getCalculationInfo("stackResultDimension"):i,l=CO(e,s,t),u=e.indicesOfNearest(s,l)[0];a[r]=e.get(n,u),a[o]=e.get(s,u);var c=e.get(i,u),h=Mr(e.get(i,u));return(h=Math.min(h,20))>=0&&(a[o]=+a[o].toFixed(h)),[a,c]}var fO={min:at(gO,"min"),max:at(gO,"max"),average:at(gO,"average"),median:at(gO,"median")};function yO(t,e){var n=t.getData(),i=t.coordinateSystem;if(e&&!function(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}(e)&&!st(e.coord)&&i){var r=i.dimensions,o=mO(e,n,i,t);if((e=X(e)).type&&fO[e.type]&&o.baseAxis&&o.valueAxis){var a=J(r,o.baseAxis.dim),s=J(r,o.valueAxis.dim),l=fO[e.type](n,o.baseDataDim,o.valueDataDim,a,s);e.coord=l[0],e.value=l[1]}else{for(var u=[null!=e.xAxis?e.xAxis:e.radiusAxis,null!=e.yAxis?e.yAxis:e.angleAxis],c=0;c<2;c++)fO[u[c]]&&(u[c]=CO(n,n.mapDimension(r[c]),u[c]));e.coord=u}}return e}function mO(t,e,n,i){var r={};return null!=t.valueIndex||null!=t.valueDim?(r.valueDataDim=null!=t.valueIndex?e.getDimension(t.valueIndex):t.valueDim,r.valueAxis=n.getAxis(function(t,e){var n=t.getData(),i=n.dimensions;e=n.getDimension(e);for(var r=0;r<i.length;r++){var o=n.getDimensionInfo(i[r]);if(o.name===e)return o.coordDim}}(i,r.valueDataDim)),r.baseAxis=n.getOtherAxis(r.valueAxis),r.baseDataDim=e.mapDimension(r.baseAxis.dim)):(r.baseAxis=i.getBaseAxis(),r.valueAxis=n.getOtherAxis(r.baseAxis),r.baseDataDim=e.mapDimension(r.baseAxis.dim),r.valueDataDim=e.mapDimension(r.valueAxis.dim)),r}function vO(t,e){return!(t&&t.containData&&e.coord&&!function(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}(e))||t.containData(e.coord)}function IO(t,e,n,i){return i<2?t.coord&&t.coord[i]:t.value}function CO(t,e,n){if("average"===n){var i=0,r=0;return t.each(e,function(t,e){isNaN(t)||(i+=t,r++)}),i/r}return"median"===n?t.getMedian(e):t.getDataExtent(e)["max"===n?1:0]}var xO=oo(),AO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return A(e,t),e.prototype.init=function(){this.markerGroupMap=Zt()},e.prototype.render=function(t,e,n){var i=this,r=this.markerGroupMap;r.each(function(t){xO(t).keep=!1}),e.eachSeries(function(t){var r=dO.getMarkerModelFromSeries(t,i.type);r&&i.renderSeries(t,r,e,n)}),r.each(function(t){!xO(t).keep&&i.group.remove(t.group)})},e.prototype.markKeep=function(t){xO(t).keep=!0},e.prototype.blurSeries=function(t){var e=this;$(t,function(t){var n=dO.getMarkerModelFromSeries(t,e.type);n&&n.getData().eachItemGraphicEl(function(t){t&&Ll(t)})})},e.type="marker",e}(xf);function _O(t,e,n){var i=e.coordinateSystem;t.each(function(r){var o,a=t.getItemModel(r),s=br(a.get("x"),n.getWidth()),l=br(a.get("y"),n.getHeight());if(isNaN(s)||isNaN(l)){if(e.getMarkerPosition)o=e.getMarkerPosition(t.getValues(t.dimensions,r));else if(i){var u=t.get(i.dimensions[0],r),c=t.get(i.dimensions[1],r);o=i.dataToPoint([u,c])}}else o=[s,l];isNaN(s)||(o[0]=s),isNaN(l)||(o[1]=l),t.setItemLayout(r,o)})}var bO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return A(e,t),e.prototype.updateTransform=function(t,e,n){e.eachSeries(function(t){var e=dO.getMarkerModelFromSeries(t,"markPoint");e&&(_O(e.getData(),t,n),this.markerGroupMap.get(t.id).updateLayout())},this)},e.prototype.renderSeries=function(t,e,n,i){var r=t.coordinateSystem,o=t.id,a=t.getData(),s=this.markerGroupMap,l=s.get(o)||s.set(o,new M_),u=function(t,e,n){var i;i=t?tt(t&&t.dimensions,function(t){var n=e.getData().getDimensionInfo(e.getData().mapDimension(t))||{};return Y({name:t},n)}):[{name:"value",type:"float"}];var r=new VC(i,n),o=tt(n.get("data"),at(yO,e));t&&(o=nt(o,at(vO,t)));return r.initData(o,null,t?IO:function(t){return t.value}),r}(r,t,e);e.setData(u),_O(e.getData(),t,i),u.each(function(t){var n=u.getItemModel(t),i=n.getShallow("symbol"),r=n.getShallow("symbolSize"),o=n.getShallow("symbolRotate");if(lt(i)||lt(r)||lt(o)){var s=e.getRawValue(t),l=e.getDataParams(t);lt(i)&&(i=i(s,l)),lt(r)&&(r=r(s,l)),lt(o)&&(o=o(s,l))}var c=n.getModel("itemStyle").getItemStyle(),h=yy(a,"color");c.fill||(c.fill=h),u.setItemVisual(t,{symbol:i,symbolSize:r,symbolRotate:o,style:c})}),l.updateData(u),this.group.add(l.group),u.eachItemGraphicEl(function(t){t.traverse(function(t){$s(t).dataModel=e})}),this.markKeep(l),l.group.silent=e.get("silent")||t.get("silent")},e.type="markPoint",e}(AO);var wO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return A(e,t),e.prototype.createMarkerModelFromSeries=function(t,n,i){return new e(t,n,i)},e.type="markLine",e.defaultOption={zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(dO),SO=oo(),MO=function(t,e,n,i){var r,o=t.getData();if(st(i))r=i;else{var a=i.type;if("min"===a||"max"===a||"average"===a||"median"===a||null!=i.xAxis||null!=i.yAxis){var s=void 0,l=void 0;if(null!=i.yAxis||null!=i.xAxis)s=e.getAxis(null!=i.yAxis?"y":"x"),l=Ct(i.yAxis,i.xAxis);else{var u=mO(i,o,e,t);s=u.valueAxis,l=CO(o,jC(o,u.valueDataDim),a)}var c="x"===s.dim?0:1,h=1-c,d=X(i),p={coord:[]};d.type=null,d.coord=[],d.coord[h]=-1/0,p.coord[h]=1/0;var g=n.get("precision");g>=0&&"number"==typeof l&&(l=+l.toFixed(Math.min(g,20))),d.coord[c]=p.coord[c]=l,r=[d,p,{type:a,valueIndex:i.valueIndex,value:l}]}else r=[]}var f=[yO(t,r[0]),yO(t,r[1]),F({},r[2])];return f[2].type=f[2].type||null,H(f[2],f[0]),H(f[2],f[1]),f};function DO(t){return!isNaN(t)&&!isFinite(t)}function TO(t,e,n,i){var r=1-t,o=i.dimensions[t];return DO(e[r])&&DO(n[r])&&e[t]===n[t]&&i.getAxis(o).containData(e[t])}function PO(t,e){if("cartesian2d"===t.type){var n=e[0].coord,i=e[1].coord;if(n&&i&&(TO(1,n,i,t)||TO(0,n,i,t)))return!0}return vO(t,e[0])&&vO(t,e[1])}function ZO(t,e,n,i,r){var o,a=i.coordinateSystem,s=t.getItemModel(e),l=br(s.get("x"),r.getWidth()),u=br(s.get("y"),r.getHeight());if(isNaN(l)||isNaN(u)){if(i.getMarkerPosition)o=i.getMarkerPosition(t.getValues(t.dimensions,e));else{var c=a.dimensions,h=t.get(c[0],e),d=t.get(c[1],e);o=a.dataToPoint([h,d])}if(H_(a,"cartesian2d")){var p=a.getAxis("x"),g=a.getAxis("y");c=a.dimensions;DO(t.get(c[0],e))?o[0]=p.toGlobalCoord(p.getExtent()[n?0:1]):DO(t.get(c[1],e))&&(o[1]=g.toGlobalCoord(g.getExtent()[n?0:1]))}isNaN(l)||(o[0]=l),isNaN(u)||(o[1]=u)}else o=[l,u];t.setItemLayout(e,o)}var kO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return A(e,t),e.prototype.updateTransform=function(t,e,n){e.eachSeries(function(t){var e=dO.getMarkerModelFromSeries(t,"markLine");if(e){var i=e.getData(),r=SO(e).from,o=SO(e).to;r.each(function(e){ZO(r,e,!0,t,n),ZO(o,e,!1,t,n)}),i.each(function(t){i.setItemLayout(t,[r.getItemLayout(t),o.getItemLayout(t)])}),this.markerGroupMap.get(t.id).updateLayout()}},this)},e.prototype.renderSeries=function(t,e,n,i){var r=t.coordinateSystem,o=t.id,a=t.getData(),s=this.markerGroupMap,l=s.get(o)||s.set(o,new eT);this.group.add(l.group);var u=function(t,e,n){var i;i=t?tt(t&&t.dimensions,function(t){var n=e.getData().getDimensionInfo(e.getData().mapDimension(t))||{};return Y({name:t},n)}):[{name:"value",type:"float"}];var r=new VC(i,n),o=new VC(i,n),a=new VC([],n),s=tt(n.get("data"),at(MO,e,t,n));t&&(s=nt(s,at(PO,t)));var l=t?IO:function(t){return t.value};return r.initData(tt(s,function(t){return t[0]}),null,l),o.initData(tt(s,function(t){return t[1]}),null,l),a.initData(tt(s,function(t){return t[2]})),a.hasItemOption=!0,{from:r,to:o,line:a}}(r,t,e),c=u.from,h=u.to,d=u.line;SO(e).from=c,SO(e).to=h,e.setData(d);var p=e.get("symbol"),g=e.get("symbolSize"),f=e.get("symbolRotate"),y=e.get("symbolOffset");function m(e,n,r){var o=e.getItemModel(n);ZO(e,n,r,t,i);var s=o.getModel("itemStyle").getItemStyle();null==s.fill&&(s.fill=yy(a,"color")),e.setItemVisual(n,{symbolKeepAspect:o.get("symbolKeepAspect"),symbolOffset:xt(o.get("symbolOffset"),y[r?0:1]),symbolRotate:xt(o.get("symbolRotate",!0),f[r?0:1]),symbolSize:xt(o.get("symbolSize"),g[r?0:1]),symbol:xt(o.get("symbol",!0),p[r?0:1]),style:s})}st(p)||(p=[p,p]),st(g)||(g=[g,g]),st(f)||(f=[f,f]),st(y)||(y=[y,y]),u.from.each(function(t){m(c,t,!0),m(h,t,!1)}),d.each(function(t){var e=d.getItemModel(t).getModel("lineStyle").getLineStyle();d.setItemLayout(t,[c.getItemLayout(t),h.getItemLayout(t)]),null==e.stroke&&(e.stroke=c.getItemVisual(t,"style").fill),d.setItemVisual(t,{fromSymbolKeepAspect:c.getItemVisual(t,"symbolKeepAspect"),fromSymbolOffset:c.getItemVisual(t,"symbolOffset"),fromSymbolRotate:c.getItemVisual(t,"symbolRotate"),fromSymbolSize:c.getItemVisual(t,"symbolSize"),fromSymbol:c.getItemVisual(t,"symbol"),toSymbolKeepAspect:h.getItemVisual(t,"symbolKeepAspect"),toSymbolOffset:h.getItemVisual(t,"symbolOffset"),toSymbolRotate:h.getItemVisual(t,"symbolRotate"),toSymbolSize:h.getItemVisual(t,"symbolSize"),toSymbol:h.getItemVisual(t,"symbol"),style:e})}),l.updateData(d),u.line.eachItemGraphicEl(function(t,n){t.traverse(function(t){$s(t).dataModel=e})}),this.markKeep(l),l.group.silent=e.get("silent")||t.get("silent")},e.type="markLine",e}(AO);var NO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return A(e,t),e.prototype.createMarkerModelFromSeries=function(t,n,i){return new e(t,n,i)},e.type="markArea",e.defaultOption={zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e}(dO),LO=oo(),RO=function(t,e,n,i){var r=yO(t,i[0]),o=yO(t,i[1]),a=r.coord,s=o.coord;a[0]=Ct(a[0],-1/0),a[1]=Ct(a[1],-1/0),s[0]=Ct(s[0],1/0),s[1]=Ct(s[1],1/0);var l=j([{},r,o]);return l.coord=[r.coord,o.coord],l.x0=r.x,l.y0=r.y,l.x1=o.x,l.y1=o.y,l};function VO(t){return!isNaN(t)&&!isFinite(t)}function GO(t,e,n,i){var r=1-t;return VO(e[r])&&VO(n[r])}function zO(t,e){var n=e.coord[0],i=e.coord[1];return!!(H_(t,"cartesian2d")&&n&&i&&(GO(1,n,i)||GO(0,n,i)))||(vO(t,{coord:n,x:e.x0,y:e.y0})||vO(t,{coord:i,x:e.x1,y:e.y1}))}function OO(t,e,n,i,r){var o,a=i.coordinateSystem,s=t.getItemModel(e),l=br(s.get(n[0]),r.getWidth()),u=br(s.get(n[1]),r.getHeight());if(isNaN(l)||isNaN(u)){if(i.getMarkerPosition)o=i.getMarkerPosition(t.getValues(n,e));else{var c=[p=t.get(n[0],e),g=t.get(n[1],e)];a.clampData&&a.clampData(c,c),o=a.dataToPoint(c,!0)}if(H_(a,"cartesian2d")){var h=a.getAxis("x"),d=a.getAxis("y"),p=t.get(n[0],e),g=t.get(n[1],e);VO(p)?o[0]=h.toGlobalCoord(h.getExtent()["x0"===n[0]?0:1]):VO(g)&&(o[1]=d.toGlobalCoord(d.getExtent()["y0"===n[1]?0:1]))}isNaN(l)||(o[0]=l),isNaN(u)||(o[1]=u)}else o=[l,u];return o}var BO=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];var WO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return A(e,t),e.prototype.updateTransform=function(t,e,n){e.eachSeries(function(t){var e=dO.getMarkerModelFromSeries(t,"markArea");if(e){var i=e.getData();i.each(function(e){var r=tt(BO,function(r){return OO(i,e,r,t,n)});i.setItemLayout(e,r),i.getItemGraphicEl(e).setShape("points",r)})}},this)},e.prototype.renderSeries=function(t,e,n,i){var r=t.coordinateSystem,o=t.id,a=t.getData(),s=this.markerGroupMap,l=s.get(o)||s.set(o,{group:new cr});this.group.add(l.group),this.markKeep(l);var u=function(t,e,n){var i,r;t?(i=tt(t&&t.dimensions,function(t){var n=e.getData(),i=n.getDimensionInfo(n.mapDimension(t))||{};return Y({name:t},i)}),r=new VC(tt(["x0","y0","x1","y1"],function(t,e){return{name:t,type:i[e%2].type}}),n)):r=new VC(i=[{name:"value",type:"float"}],n);var o=tt(n.get("data"),at(RO,e,t,n));t&&(o=nt(o,at(zO,t)));var a=t?function(t,e,n,i){return t.coord[Math.floor(i/2)][i%2]}:function(t){return t.value};return r.initData(o,null,a),r.hasItemOption=!0,r}(r,t,e);e.setData(u),u.each(function(e){var n=tt(BO,function(n){return OO(u,e,n,t,i)}),o=r.getAxis("x").scale,s=r.getAxis("y").scale,l=o.getExtent(),c=s.getExtent(),h=[o.parse(u.get("x0",e)),o.parse(u.get("x1",e))],d=[s.parse(u.get("y0",e)),s.parse(u.get("y1",e))];Sr(h),Sr(d);var p=!!(l[0]>h[1]||l[1]<h[0]||c[0]>d[1]||c[1]<d[0]);u.setItemLayout(e,{points:n,allClipped:p});var g=u.getItemModel(e).getModel("itemStyle").getItemStyle(),f=yy(a,"color");g.fill||(g.fill=f,"string"==typeof g.fill&&(g.fill=Dn(g.fill,.4))),g.stroke||(g.stroke=f),u.setItemVisual(e,"style",g)}),u.diff(LO(l).data).add(function(t){var e=u.getItemLayout(t);if(!e.allClipped){var n=new Fu({shape:{points:e.points}});u.setItemGraphicEl(t,n),l.group.add(n)}}).update(function(t,n){var i=LO(l).data.getItemGraphicEl(n),r=u.getItemLayout(t);r.allClipped?i&&l.group.remove(i):(i?Vc(i,{shape:{points:r.points}},e,t):i=new Fu({shape:{points:r.points}}),u.setItemGraphicEl(t,i),l.group.add(i))}).remove(function(t){var e=LO(l).data.getItemGraphicEl(t);l.group.remove(e)}).execute(),u.eachItemGraphicEl(function(t,n){var i=u.getItemModel(n),r=u.getItemVisual(n,"style");t.useStyle(u.getItemVisual(n,"style")),ih(t,rh(i),{labelFetcher:e,labelDataIndex:n,defaultText:u.getName(n)||"",inheritColor:"string"==typeof r.fill?Dn(r.fill,1):"#000"}),Ul(t,i),Hl(t),$s(t).dataModel=e}),LO(l).data=u,l.group.silent=e.get("silent")||t.get("silent")},e.type="markArea",e}(AO);var EO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode={type:"box",ignoreSize:!0},n}return A(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(e,n){t.prototype.mergeOption.call(this,e,n),this._updateSelector(e)},e.prototype._updateSelector=function(t){var e=t.selector,n=this.ecModel;!0===e&&(e=t.selector=["all","inverse"]),st(e)&&$(e,function(t,i){ut(t)&&(t={type:t}),e[i]=H(t,function(t,e){return"all"===e?{type:"all",title:t.getLocale(["legend","selector","all"])}:"inverse"===e?{type:"inverse",title:t.getLocale(["legend","selector","inverse"])}:void 0}(n,t.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var e=!1,n=0;n<t.length;n++){var i=t[n].get("name");if(this.isSelected(i)){this.select(i),e=!0;break}}!e&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var e=[],n=[];t.eachRawSeries(function(i){var r,o=i.name;if(n.push(o),i.legendVisualProvider){var a=i.legendVisualProvider.getAllNames();t.isSeriesFiltered(i)||(n=n.concat(a)),a.length?e=e.concat(a):r=!0}else r=!0;r&&no(i)&&e.push(i.name)}),this._availableNames=n;var i=tt(this.get("data")||e,function(t){return"string"!=typeof t&&"number"!=typeof t||(t={name:t}),new Mh(t,this,this.ecModel)},this);this._data=i},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var e=this.option.selected;"single"===this.get("selectedMode")&&$(this._data,function(t){e[t.get("name")]=!1});e[t]=!0},e.prototype.unSelect=function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var e=this.option.selected;e.hasOwnProperty(t)||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,e=this.option.selected;$(t,function(t){e[t.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,e=this.option.selected;$(t,function(t){var n=t.get("name",!0);e.hasOwnProperty(n)||(e[n]=!0),e[n]=!e[n]})},e.prototype.isSelected=function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&J(this._availableNames,t)>=0},e.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",decal:"inherit",shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit",shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(Xd),XO=at,HO=$,jO=cr;function FO(t,e,n,i){JO(t,e,n,i),n.dispatchAction({type:"legendToggleSelect",name:null!=t?t:e}),UO(t,e,n,i)}function YO(t){for(var e,n=t.getZr().storage.getDisplayList(),i=0,r=n.length;i<r&&!(e=n[i].states.emphasis);)i++;return e&&e.hoverLayer}function UO(t,e,n,i){YO(n)||n.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:i})}function JO(t,e,n,i){YO(n)||n.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:i})}var QO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!1,n}return A(e,t),e.prototype.init=function(){this.group.add(this._contentGroup=new jO),this.group.add(this._selectorGroup=new jO),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,e,n){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),t.get("show",!0)){var r=t.get("align"),o=t.get("orient");r&&"auto"!==r||(r="right"===t.get("left")&&"vertical"===o?"right":"left");var a=t.get("selector",!0),s=t.get("selectorPosition",!0);!a||s&&"auto"!==s||(s="horizontal"===o?"end":"start"),this.renderInner(r,t,e,n,a,o,s);var l=t.getBoxLayoutParams(),u={width:n.getWidth(),height:n.getHeight()},c=t.get("padding"),h=Rd(l,u,c),d=this.layoutInner(t,r,h,i,a,s),p=Rd(Y({width:d.width,height:d.height},l),u,c);this.group.x=p.x-d.x,this.group.y=p.y-d.y,this.group.markRedraw(),this.group.add(this._backgroundEl=hG(d,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,e,n,i,r,o,a){var s=this.getContentGroup(),l=Zt(),u=e.get("selectedMode"),c=[];n.eachRawSeries(function(t){!t.get("legendHoverLink")&&c.push(t.id)}),HO(e.getData(),function(r,o){var a=r.get("name");if(!this.newlineDisabled&&(""===a||"\n"===a)){var h=new jO;return h.newline=!0,void s.add(h)}var d=n.getSeriesByName(a)[0];if(!l.get(a)){if(d){var p=d.getData(),g=p.getVisual("legendLineStyle")||{},f=p.getVisual("legendIcon"),y=p.getVisual("style");this._createItem(d,a,o,r,e,t,g,y,f,u).on("click",XO(FO,a,null,i,c)).on("mouseover",XO(UO,d.name,null,i,c)).on("mouseout",XO(JO,d.name,null,i,c)),l.set(a,!0)}else n.eachRawSeries(function(n){if(!l.get(a)&&n.legendVisualProvider){var s=n.legendVisualProvider;if(!s.containName(a))return;var h=s.indexOfName(a),d=s.getItemVisual(h,"style"),p=s.getItemVisual(h,"legendIcon"),g=In(d.fill);g&&0===g[3]&&(g[3]=.2,d.fill=Tn(g,"rgba")),this._createItem(n,a,o,r,e,t,{},d,p,u).on("click",XO(FO,null,a,i,c)).on("mouseover",XO(UO,null,a,i,c)).on("mouseout",XO(JO,null,a,i,c)),l.set(a,!0)}},this);0}},this),r&&this._createSelector(r,e,i,o,a)},e.prototype._createSelector=function(t,e,n,i,r){var o=this.getSelectorGroup();HO(t,function(t){var i=t.type,r=new qs({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===i?"legendAllSelect":"legendInverseSelect"})}});o.add(r),ih(r,{normal:e.getModel("selectorLabel"),emphasis:e.getModel(["emphasis","selectorLabel"])},{defaultText:t.title}),Hl(r)})},e.prototype._createItem=function(t,e,n,i,r,o,a,s,l,u){var c=t.visualDrawType,h=r.get("itemWidth"),d=r.get("itemHeight"),p=r.isSelected(e),g=i.get("symbolRotate"),f=i.get("icon"),y=function(t,e,n,i,r,o,a){for(var s=e.getModel("itemStyle"),l=_h.concat([["decal"]]),u={},c=0;c<l.length;++c){var h=l[c][l[c].length-1],d=l[c][0],p=s.getShallow(h);if("inherit"===p)switch(d){case"fill":u.fill=r[o];break;case"stroke":u.stroke=r[0===t.lastIndexOf("empty",0)?"fill":"stroke"];break;case"opacity":u.opacity=("fill"===o?r:i).opacity;break;default:u[d]=r[d]}else"auto"===p&&"lineWidth"===d?u.lineWidth=r.lineWidth>0?2:0:u[d]=p}for(var g=e.getModel("lineStyle"),f=Ch.concat([["inactiveColor"],["inactiveWidth"]]),y={},c=0;c<f.length;++c){var h=f[c][1],d=f[c][0],p=g.getShallow(h);"inherit"===p?y[d]=i[d]:"auto"===p&&"lineWidth"===d?y.lineWidth=i.lineWidth>0?2:0:y[d]=p}if("auto"===u.fill&&(u.fill=r.fill),"auto"===u.stroke&&(u.stroke=r.fill),"auto"===y.stroke&&(y.stroke=r.fill),!a){var m=e.get("inactiveBorderWidth"),v=u[t.indexOf("empty")>-1?"fill":"stroke"];u.lineWidth="auto"===m?r.lineWidth>0&&v?2:0:u.lineWidth,u.fill=e.get("inactiveColor"),u.stroke=e.get("inactiveBorderColor"),y.stroke=n.get("inactiveColor"),y.lineWidth=n.get("inactiveWidth")}return{itemStyle:u,lineStyle:y}}(l=f||l||"roundRect",i,r.getModel("lineStyle"),a,s,c,p),m=new jO,v=i.getModel("textStyle");if("function"!=typeof t.getLegendIcon||f&&"inherit"!==f){var I="inherit"===f&&t.getData().getVisual("symbol")?"inherit"===g?t.getData().getVisual("symbolRotate"):g:0;m.add(function(t){var e=t.icon||"roundRect",n=hm(e,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill);n.setStyle(t.itemStyle),n.rotation=(t.iconRotate||0)*Math.PI/180,n.setOrigin([t.itemWidth/2,t.itemHeight/2]),e.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2);return n}({itemWidth:h,itemHeight:d,icon:l,iconRotate:I,itemStyle:y.itemStyle,lineStyle:y.lineStyle}))}else m.add(t.getLegendIcon({itemWidth:h,itemHeight:d,icon:l,iconRotate:g,itemStyle:y.itemStyle,lineStyle:y.lineStyle}));var C="left"===o?h+5:-5,x=o,A=r.get("formatter"),_=e;"string"==typeof A&&A?_=A.replace("{name}",null!=e?e:""):"function"==typeof A&&(_=A(e));var b=i.get("inactiveColor");m.add(new qs({style:oh(v,{text:_,x:C,y:d/2,fill:p?v.getTextColor():b,align:x,verticalAlign:"middle"})}));var w=new Ws({shape:m.getBoundingRect(),invisible:!0}),S=i.getModel("tooltip");return S.get("show")&&$c({el:w,componentModel:r,itemName:e,itemTooltipOption:S.option}),m.add(w),m.eachChild(function(t){t.silent=!0}),w.silent=!u,this.getContentGroup().add(m),Hl(m),m.__legendDataIndex=n,m},e.prototype.layoutInner=function(t,e,n,i,r,o){var a=this.getContentGroup(),s=this.getSelectorGroup();Ld(t.get("orient"),a,t.get("itemGap"),n.width,n.height);var l=a.getBoundingRect(),u=[-l.x,-l.y];if(s.markRedraw(),a.markRedraw(),r){Ld("horizontal",s,t.get("selectorItemGap",!0));var c=s.getBoundingRect(),h=[-c.x,-c.y],d=t.get("selectorButtonGap",!0),p=t.getOrient().index,g=0===p?"width":"height",f=0===p?"height":"width",y=0===p?"y":"x";"end"===o?h[p]+=l[g]+d:u[p]+=c[g]+d,h[1-p]+=l[f]/2-c[f]/2,s.x=h[0],s.y=h[1],a.x=u[0],a.y=u[1];var m={x:0,y:0};return m[g]=l[g]+d+c[g],m[f]=Math.max(l[f],c[f]),m[y]=Math.min(0,c[y]+h[1-p]),m}return a.x=u[0],a.y=u[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(xf);function KO(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries(function(t){for(var n=0;n<e.length;n++)if(!e[n].isSelected(t.name))return!1;return!0})}function qO(t,e,n){var i,r={},o="toggleSelected"===t;return n.eachComponent("legend",function(n){o&&null!=i?n[i?"select":"unSelect"](e.name):"allSelect"===t||"inverseSelect"===t?n[t]():(n[t](e.name),i=n.isSelected(e.name)),$(n.getData(),function(t){var e=t.get("name");if("\n"!==e&&""!==e){var i=n.isSelected(e);r.hasOwnProperty(e)?r[e]=r[e]&&i:r[e]=i}})}),"allSelect"===t||"inverseSelect"===t?{selected:r}:{name:e.name,selected:r}}function $O(t){t.registerComponentModel(EO),t.registerComponentView(QO),t.registerProcessor(t.PRIORITY.PROCESSOR.SERIES_FILTER,KO),t.registerSubTypeDefaulter("legend",function(){return"plain"}),function(t){t.registerAction("legendToggleSelect","legendselectchanged",at(qO,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",at(qO,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",at(qO,"inverseSelect")),t.registerAction("legendSelect","legendselected",at(qO,"select")),t.registerAction("legendUnSelect","legendunselected",at(qO,"unSelect"))}(t)}function tB(t,e,n){var i=[1,1];i[t.getOrient().index]=0,zd(e,n,{type:"box",ignoreSize:!!i})}var eB=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return A(e,t),e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(e,n,i){var r=Od(e);t.prototype.init.call(this,e,n,i),tB(this,e,r)},e.prototype.mergeOption=function(e,n){t.prototype.mergeOption.call(this,e,n),tB(this,this.option,e)},e.type="legend.scroll",e.defaultOption=Ph(EO.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(EO),nB=cr,iB=["width","height"],rB=["x","y"],oB=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!0,n._currentIndex=0,n}return A(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.group.add(this._containerGroup=new nB),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new nB)},e.prototype.resetInner=function(){t.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(e,n,i,r,o,a,s){var l=this;t.prototype.renderInner.call(this,e,n,i,r,o,a,s);var u=this._controllerGroup,c=n.get("pageIconSize",!0),h=st(c)?c:[c,c];p("pagePrev",0);var d=n.getModel("pageTextStyle");function p(t,e){var i=t+"DataIndex",o=Jc(n.get("pageIcons",!0)[n.getOrient().name][e],{onclick:ot(l._pageGo,l,i,n,r)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});o.name=t,u.add(o)}u.add(new qs({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1)},e.prototype.layoutInner=function(t,e,n,i,r,o){var a=this.getSelectorGroup(),s=t.getOrient().index,l=iB[s],u=rB[s],c=iB[1-s],h=rB[1-s];r&&Ld("horizontal",a,t.get("selectorItemGap",!0));var d=t.get("selectorButtonGap",!0),p=a.getBoundingRect(),g=[-p.x,-p.y],f=X(n);r&&(f[l]=n[l]-p[l]-d);var y=this._layoutContentAndController(t,i,f,s,l,c,h,u);if(r){if("end"===o)g[s]+=y[l]+d;else{var m=p[l]+d;g[s]-=m,y[u]-=m}y[l]+=p[l]+d,g[1-s]+=y[h]+y[c]/2-p[c]/2,y[c]=Math.max(y[c],p[c]),y[h]=Math.min(y[h],p[h]+g[1-s]),a.x=g[0],a.y=g[1],a.markRedraw()}return y},e.prototype._layoutContentAndController=function(t,e,n,i,r,o,a,s){var l=this.getContentGroup(),u=this._containerGroup,c=this._controllerGroup;Ld(t.get("orient"),l,t.get("itemGap"),i?n.width:null,i?null:n.height),Ld("horizontal",c,t.get("pageButtonItemGap",!0));var h=l.getBoundingRect(),d=c.getBoundingRect(),p=this._showController=h[r]>n[r],g=[-h.x,-h.y];e||(g[i]=l[s]);var f=[0,0],y=[-d.x,-d.y],m=xt(t.get("pageButtonGap",!0),t.get("itemGap",!0));p&&("end"===t.get("pageButtonPosition",!0)?y[i]+=n[r]-d[r]:f[i]+=d[r]+m);y[1-i]+=h[o]/2-d[o]/2,l.setPosition(g),u.setPosition(f),c.setPosition(y);var v={x:0,y:0};if(v[r]=p?n[r]:h[r],v[o]=Math.max(h[o],d[o]),v[a]=Math.min(0,d[a]+y[1-i]),u.__rectSize=n[r],p){var I={x:0,y:0};I[r]=Math.max(n[r]-d[r]-m,0),I[o]=v[o],u.setClipPath(new Ws({shape:I})),u.__rectSize=I[r]}else c.eachChild(function(t){t.attr({invisible:!0,silent:!0})});var C=this._getPageInfo(t);return null!=C.pageIndex&&Vc(l,{x:C.contentPosition[0],y:C.contentPosition[1]},p?t:null),this._updatePageInfoView(t,C),v},e.prototype._pageGo=function(t,e,n){var i=this._getPageInfo(e)[t];null!=i&&n.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:e.id})},e.prototype._updatePageInfoView=function(t,e){var n=this._controllerGroup;$(["pagePrev","pageNext"],function(i){var r=null!=e[i+"DataIndex"],o=n.childOfName(i);o&&(o.setStyle("fill",r?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),o.cursor=r?"pointer":"default")});var i=n.childOfName("pageText"),r=t.get("pageFormatter"),o=e.pageIndex,a=null!=o?o+1:0,s=e.pageCount;i&&r&&i.setStyle("text",ut(r)?r.replace("{current}",null==a?"":a+"").replace("{total}",null==s?"":s+""):r({current:a,total:s}))},e.prototype._getPageInfo=function(t){var e=t.get("scrollDataIndex",!0),n=this.getContentGroup(),i=this._containerGroup.__rectSize,r=t.getOrient().index,o=iB[r],a=rB[r],s=this._findTargetItemIndex(e),l=n.children(),u=l[s],c=l.length,h=c?1:0,d={contentPosition:[n.x,n.y],pageCount:h,pageIndex:h-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!u)return d;var p=v(u);d.contentPosition[r]=-p.s;for(var g=s+1,f=p,y=p,m=null;g<=c;++g)(!(m=v(l[g]))&&y.e>f.s+i||m&&!I(m,f.s))&&(f=y.i>f.i?y:m)&&(null==d.pageNextDataIndex&&(d.pageNextDataIndex=f.i),++d.pageCount),y=m;for(g=s-1,f=p,y=p,m=null;g>=-1;--g)(m=v(l[g]))&&I(y,m.s)||!(f.i<y.i)||(y=f,null==d.pagePrevDataIndex&&(d.pagePrevDataIndex=f.i),++d.pageCount,++d.pageIndex),f=m;return d;function v(t){if(t){var e=t.getBoundingRect(),n=e[a]+t[a];return{s:n,e:n+e[o],i:t.__legendDataIndex}}}function I(t,e){return t.e>=e&&t.s<=e+i}},e.prototype._findTargetItemIndex=function(t){return this._showController?(this.getContentGroup().eachChild(function(i,r){var o=i.__legendDataIndex;null==n&&null!=o&&(n=r),o===t&&(e=r)}),null!=e?e:n):0;var e,n},e.type="legend.scroll",e}(QO);function aB(t){aC($O),t.registerComponentModel(eB),t.registerComponentView(oB),function(t){t.registerAction("legendScroll","legendscroll",function(t,e){var n=t.scrollDataIndex;null!=n&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},function(t){t.setScrollDataIndex(n)})})}(t)}var sB=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return A(e,t),e.type="dataZoom.inside",e.defaultOption=Ph(JV.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e}(JV),lB=oo();function uB(t,e){if(e){t.removeKey(e.model.uid);var n=e.controller;n&&n.dispose()}}function cB(t,e){t.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function hB(t,e,n,i){return t.coordinateSystem.containPoint([n,i])}function dB(t){t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,function(t,e){var n=lB(e),i=n.coordSysRecordMap||(n.coordSysRecordMap=Zt());i.each(function(t){t.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(t){$(FV(t).infoList,function(n){var r=n.model.uid,o=i.get(r)||i.set(r,function(t,e){var n={model:e,containsPoint:at(hB,e),dispatchAction:at(cB,t),dataZoomInfoMap:null,controller:null},i=n.controller=new nS(t.getZr());return $(["pan","zoom","scrollMove"],function(t){i.on(t,function(e){var i=[];n.dataZoomInfoMap.each(function(r){if(e.isAvailableBehavior(r.model.option)){var o=(r.getRange||{})[t],a=o&&o(r.dzReferCoordSysInfo,n.model.mainType,n.controller,e);!r.model.get("disabled",!0)&&a&&i.push({dataZoomId:r.model.id,start:a[0],end:a[1]})}}),i.length&&n.dispatchAction(i)})}),n}(e,n.model));(o.dataZoomInfoMap||(o.dataZoomInfoMap=Zt())).set(t.uid,{dzReferCoordSysInfo:n,model:t,getRange:null})})}),i.each(function(t){var e,n=t.controller,r=t.dataZoomInfoMap;if(r){var o=r.keys()[0];null!=o&&(e=r.get(o))}if(e){var a=function(t){var e,n={type_true:2,type_move:1,type_false:0,type_undefined:-1},i=!0;return t.each(function(t){var r=t.model,o=!r.get("disabled",!0)&&(!r.get("zoomLock",!0)||"move");n["type_"+o]>n["type_"+e]&&(e=o),i=i&&r.get("preventDefaultMouseMove",!0)}),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!i}}}(r);n.enable(a.controlType,a.opt),n.setPointerChecker(t.containsPoint),Vf(t,"dispatchAction",e.model.get("throttle",!0),"fixRate")}else uB(i,t)})})}var pB=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return A(e,t),e.prototype.render=function(e,n,i){t.prototype.render.apply(this,arguments),e.noTarget()?this._clear():(this.range=e.getPercentRange(),function(t,e,n){lB(t).coordSysRecordMap.each(function(t){var i=t.dataZoomInfoMap.get(e.uid);i&&(i.getRange=n)})}(i,e,{pan:ot(gB.pan,this),zoom:ot(gB.zoom,this),scrollMove:ot(gB.scrollMove,this)}))},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){!function(t,e){for(var n=lB(t).coordSysRecordMap,i=n.keys(),r=0;r<i.length;r++){var o=i[r],a=n.get(o),s=a.dataZoomInfoMap;if(s){var l=e.uid;s.get(l)&&(s.removeKey(l),s.keys().length||uB(n,a))}}}(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e}(KV),gB={zoom:function(t,e,n,i){var r=this.range,o=r.slice(),a=t.axisModels[0];if(a){var s=yB[e](null,[i.originX,i.originY],a,n,t),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(o[1]-o[0])+o[0],u=Math.max(1/i.scale,0);o[0]=(o[0]-l)*u+l,o[1]=(o[1]-l)*u+l;var c=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return JT(0,o,[0,100],0,c.minSpan,c.maxSpan),this.range=o,r[0]!==o[0]||r[1]!==o[1]?o:void 0}},pan:fB(function(t,e,n,i,r,o){var a=yB[i]([o.oldX,o.oldY],[o.newX,o.newY],e,r,n);return a.signal*(t[1]-t[0])*a.pixel/a.pixelLength}),scrollMove:fB(function(t,e,n,i,r,o){return yB[i]([0,0],[o.scrollDelta,o.scrollDelta],e,r,n).signal*(t[1]-t[0])*o.scrollDelta})};function fB(t){return function(e,n,i,r){var o=this.range,a=o.slice(),s=e.axisModels[0];if(s)return JT(t(a,s,e,n,i,r),a,[0,100],"all"),this.range=a,o[0]!==a[0]||o[1]!==a[1]?a:void 0}}var yB={grid:function(t,e,n,i,r){var o=n.axis,a={},s=r.model.coordinateSystem.getRect();return t=t||[0,0],"x"===o.dim?(a.pixel=e[0]-t[0],a.pixelLength=s.width,a.pixelStart=s.x,a.signal=o.inverse?1:-1):(a.pixel=e[1]-t[1],a.pixelLength=s.height,a.pixelStart=s.y,a.signal=o.inverse?-1:1),a},polar:function(t,e,n,i,r){var o=n.axis,a={},s=r.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),u=s.getAngleAxis().getExtent();return t=t?s.pointToCoord(t):[0,0],e=s.pointToCoord(e),"radiusAxis"===n.mainType?(a.pixel=e[0]-t[0],a.pixelLength=l[1]-l[0],a.pixelStart=l[0],a.signal=o.inverse?1:-1):(a.pixel=e[1]-t[1],a.pixelLength=u[1]-u[0],a.pixelStart=u[0],a.signal=o.inverse?-1:1),a},singleAxis:function(t,e,n,i,r){var o=n.axis,a=r.model.coordinateSystem.getRect(),s={};return t=t||[0,0],"horizontal"===o.orient?(s.pixel=e[0]-t[0],s.pixelLength=a.width,s.pixelStart=a.x,s.signal=o.inverse?1:-1):(s.pixel=e[1]-t[1],s.pixelLength=a.height,s.pixelStart=a.y,s.signal=o.inverse?-1:1),s}},mB=pB;function vB(t){rG(t),t.registerComponentModel(sB),t.registerComponentView(mB),dB(t)}var IB=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return A(e,t),e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=Ph(JV.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),e}(JV),CB=Ws,xB="horizontal",AB=5,_B=["line","bar","candlestick","scatter"],bB={easing:"cubicOut",duration:100};function wB(t){return"vertical"===t?"ns-resize":"ew-resize"}var SB=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._displayables={},n}return A(e,t),e.prototype.init=function(t,e){this.api=e,this._onBrush=ot(this._onBrush,this),this._onBrushEnd=ot(this._onBrushEnd,this)},e.prototype.render=function(e,n,i,r){if(t.prototype.render.apply(this,arguments),Vf(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),!1!==e.get("show")){if(e.noTarget())return this._clear(),void this.group.removeAll();r&&"dataZoom"===r.type&&r.from===this.uid||this._buildView(),this._updateView()}else this.group.removeAll()},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){var t,e,n;(n=(t=this)[e="_dispatchZoomAction"])&&n[kf]&&(t[e]=n[kf]);var i=this.api.getZr();i.off("mousemove",this._onBrush),i.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var e=this._displayables.sliderGroup=new cr;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(e),this._positionGroup()},e.prototype._resetLocation=function(){var t=this.dataZoomModel,e=this.api,n=t.get("brushSelect")?7:0,i=this._findCoordRect(),r={width:e.getWidth(),height:e.getHeight()},o=this._orient===xB?{right:r.width-i.x-i.width,top:r.height-30-7-n,width:i.width,height:30}:{right:7,top:i.y,width:30,height:i.height},a=Od(t.option);$(["right","top","width","height"],function(t){"ph"===a[t]&&(a[t]=o[t])});var s=Rd(a,r);this._location={x:s.x,y:s.y},this._size=[s.width,s.height],"vertical"===this._orient&&this._size.reverse()},e.prototype._positionGroup=function(){var t=this.group,e=this._location,n=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),r=i&&i.get("inverse"),o=this._displayables.sliderGroup,a=(this._dataShadowInfo||{}).otherAxisInverse;o.attr(n!==xB||r?n===xB&&r?{scaleY:a?1:-1,scaleX:-1}:"vertical"!==n||r?{scaleY:a?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:a?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:a?1:-1,scaleX:1});var s=t.getBoundingRect([o]);t.x=e.x-s.x,t.y=e.y-s.y,t.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var t=this.dataZoomModel,e=this._size,n=this._displayables.sliderGroup,i=t.get("brushSelect");n.add(new CB({silent:!0,shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var r=new CB({shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:"transparent"},z2:0,onclick:ot(this._onClickPanel,this)}),o=this.api.getZr();i?(r.on("mousedown",this._onBrushStart,this),r.cursor="crosshair",o.on("mousemove",this._onBrush),o.on("mouseup",this._onBrushEnd)):(o.off("mousemove",this._onBrush),o.off("mouseup",this._onBrushEnd)),n.add(r)},e.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],t){var e=this._size,n=t.series,i=n.getRawData(),r=n.getShadowDim?n.getShadowDim():t.otherDim;if(null!=r){var o=i.getDataExtent(r),a=.3*(o[1]-o[0]);o=[o[0]-a,o[1]+a];var s,l=[0,e[1]],u=[0,e[0]],c=[[e[0],0],[0,0]],h=[],d=u[1]/(i.count()-1),p=0,g=Math.round(i.count()/e[0]);i.each([r],function(t,e){if(g>0&&e%g)p+=d;else{var n=null==t||isNaN(t)||""===t,i=n?0:_r(t,o,l,!0);n&&!s&&e?(c.push([c[c.length-1][0],0]),h.push([h[h.length-1][0],0])):!n&&s&&(c.push([p,0]),h.push([p,0])),c.push([p,i]),h.push([p,i]),p+=d,s=n}});for(var f=this.dataZoomModel,y=0;y<3;y++){var m=v(1===y);this._displayables.sliderGroup.add(m),this._displayables.dataShadowSegs.push(m)}}}function v(t){var e=f.getModel(t?"selectedDataBackground":"dataBackground"),n=new cr,i=new Fu({shape:{points:c},segmentIgnoreThreshold:1,style:e.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),r=new Ju({shape:{points:h},segmentIgnoreThreshold:1,style:e.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return n.add(i),n.add(r),n}},e.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,e=t.get("showDataShadow");if(!1!==e){var n,i=this.ecModel;return t.eachTargetAxis(function(r,o){$(t.getAxisProxy(r,o).getTargetSeriesModels(),function(t){if(!(n||!0!==e&&J(_B,t.get("type"))<0)){var a,s=i.getComponent(HV(r),o).axis,l={x:"y",y:"x",radius:"angle",angle:"radius"}[r],u=t.coordinateSystem;null!=l&&u.getOtherAxis&&(a=u.getOtherAxis(s).inverse),l=t.getData().mapDimension(l),n={thisAxis:s,series:t,thisDim:r,otherDim:l,otherAxisInverse:a}}},this)},this),n}},e.prototype._renderHandle=function(){var t=this.group,e=this._displayables,n=e.handles=[null,null],i=e.handleLabels=[null,null],r=this._displayables.sliderGroup,o=this._size,a=this.dataZoomModel,s=this.api,l=a.get("borderRadius")||0,u=a.get("brushSelect"),c=e.filler=new CB({silent:u,style:{fill:a.get("fillerColor")},textConfig:{position:"inside"}});r.add(c),r.add(new CB({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:o[0],height:o[1],r:l},style:{stroke:a.get("dataBackgroundColor")||a.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),$([0,1],function(e){var o=a.get("handleIcon");!lm[o]&&o.indexOf("path://")<0&&o.indexOf("image://")<0&&(o="path://"+o);var s=hm(o,-1,0,2,2,null,!0);s.attr({cursor:wB(this._orient),draggable:!0,drift:ot(this._onDragMove,this,e),ondragend:ot(this._onDragEnd,this),onmouseover:ot(this._showDataInfo,this,!0),onmouseout:ot(this._showDataInfo,this,!1),z2:5});var l=s.getBoundingRect(),u=a.get("handleSize");this._handleHeight=br(u,this._size[1]),this._handleWidth=l.width/l.height*this._handleHeight,s.setStyle(a.getModel("handleStyle").getItemStyle()),s.style.strokeNoScale=!0,s.rectHover=!0,s.ensureState("emphasis").style=a.getModel(["emphasis","handleStyle"]).getItemStyle(),Hl(s);var c=a.get("handleColor");null!=c&&(s.style.fill=c),r.add(n[e]=s);var h=a.getModel("textStyle");t.add(i[e]=new qs({silent:!0,invisible:!0,style:oh(h,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:h.getTextColor(),font:h.getFont()}),z2:10}))},this);var h=c;if(u){var d=br(a.get("moveHandleSize"),o[1]),p=e.moveHandle=new Ws({style:a.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:o[1]-.5,height:d}}),g=.8*d,f=e.moveHandleIcon=hm(a.get("moveHandleIcon"),-g/2,-g/2,g,g,"#fff",!0);f.silent=!0,f.y=o[1]+d/2-.5,p.ensureState("emphasis").style=a.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var y=Math.min(o[1]/2,Math.max(d,10));(h=e.moveZone=new Ws({invisible:!0,shape:{y:o[1]-y,height:d+y}})).on("mouseover",function(){s.enterEmphasis(p)}).on("mouseout",function(){s.leaveEmphasis(p)}),r.add(p),r.add(f),r.add(h)}h.attr({draggable:!0,cursor:wB(this._orient),drift:ot(this._onDragMove,this,"all"),ondragstart:ot(this._showDataInfo,this,!0),ondragend:ot(this._onDragEnd,this),onmouseover:ot(this._showDataInfo,this,!0),onmouseout:ot(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),e=this._getViewExtent();this._handleEnds=[_r(t[0],[0,100],e,!0),_r(t[1],[0,100],e,!0)]},e.prototype._updateInterval=function(t,e){var n=this.dataZoomModel,i=this._handleEnds,r=this._getViewExtent(),o=n.findRepresentativeAxisProxy().getMinMaxSpan(),a=[0,100];JT(e,i,r,n.get("zoomLock")?"all":t,null!=o.minSpan?_r(o.minSpan,a,r,!0):null,null!=o.maxSpan?_r(o.maxSpan,a,r,!0):null);var s=this._range,l=this._range=Sr([_r(i[0],r,a,!0),_r(i[1],r,a,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},e.prototype._updateView=function(t){var e=this._displayables,n=this._handleEnds,i=Sr(n.slice()),r=this._size;$([0,1],function(t){var i=e.handles[t],o=this._handleHeight;i.attr({scaleX:o/2,scaleY:o/2,x:n[t]+(t?-1:1),y:r[1]/2-o/2})},this),e.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:r[1]});var o={x:i[0],width:i[1]-i[0]};e.moveHandle&&(e.moveHandle.setShape(o),e.moveZone.setShape(o),e.moveZone.getBoundingRect(),e.moveHandleIcon&&e.moveHandleIcon.attr("x",o.x+o.width/2));for(var a=e.dataShadowSegs,s=[0,i[0],i[1],r[0]],l=0;l<a.length;l++){var u=a[l],c=u.getClipPath();c||(c=new Ws,u.setClipPath(c)),c.setShape({x:s[l],y:0,width:s[l+1]-s[l],height:r[1]})}this._updateDataInfo(t)},e.prototype._updateDataInfo=function(t){var e=this.dataZoomModel,n=this._displayables,i=n.handleLabels,r=this._orient,o=["",""];if(e.get("showDetail")){var a=e.findRepresentativeAxisProxy();if(a){var s=a.getAxisModel().axis,l=this._range,u=t?a.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:a.getDataValueWindow();o=[this._formatLabel(u[0],s),this._formatLabel(u[1],s)]}}var c=Sr(this._handleEnds.slice());function h(t){var e=Ec(n.handles[t].parent,this.group),a=Hc(0===t?"right":"left",e),s=this._handleWidth/2+AB,l=Xc([c[t]+(0===t?-s:s),this._size[1]/2],e);i[t].setStyle({x:l[0],y:l[1],verticalAlign:r===xB?"middle":a,align:r===xB?a:"center",text:o[t]})}h.call(this,0),h.call(this,1)},e.prototype._formatLabel=function(t,e){var n=this.dataZoomModel,i=n.get("labelFormatter"),r=n.get("labelPrecision");null!=r&&"auto"!==r||(r=e.getPixelPrecision());var o=null==t||isNaN(t)?"":"category"===e.type||"time"===e.type?e.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(r,20));return lt(i)?i(t,o):ut(i)?i.replace("{value}",o):o},e.prototype._showDataInfo=function(t){t=this._dragging||t;var e=this._displayables,n=e.handleLabels;n[0].attr("invisible",!t),n[1].attr("invisible",!t),e.moveHandle&&this.api[t?"enterEmphasis":"leaveEmphasis"](e.moveHandle,1)},e.prototype._onDragMove=function(t,e,n,i){this._dragging=!0,we(i.event);var r=Xc([e,n],this._displayables.sliderGroup.getLocalTransform(),!0),o=this._updateInterval(t,r[0]),a=this.dataZoomModel.get("realtime");this._updateView(!a),o&&a&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(t){var e=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(n[0]<0||n[0]>e[0]||n[1]<0||n[1]>e[1])){var i=this._handleEnds,r=(i[0]+i[1])/2,o=this._updateInterval("all",n[0]-r);this._updateView(),o&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(t){var e=t.offsetX,n=t.offsetY;this._brushStart=new Ni(e,n),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(t){if(this._brushing){var e=this._displayables.brushRect;if(this._brushing=!1,e){e.attr("ignore",!0);var n=e.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(n.width)<5)){var i=this._getViewExtent(),r=[0,100];this._range=Sr([_r(n.x,i,r,!0),_r(n.x+n.width,i,r,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(t){this._brushing&&(we(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},e.prototype._updateBrushRect=function(t,e){var n=this._displayables,i=this.dataZoomModel,r=n.brushRect;r||(r=n.brushRect=new CB({silent:!0,style:i.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(r)),r.attr("ignore",!1);var o=this._brushStart,a=this._displayables.sliderGroup,s=a.transformCoordToLocal(t,e),l=a.transformCoordToLocal(o.x,o.y),u=this._size;s[0]=Math.max(Math.min(u[0],s[0]),0),r.setShape({x:l[0],y:0,width:s[0]-l[0],height:u[1]})},e.prototype._dispatchZoomAction=function(t){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?bB:null,start:e[0],end:e[1]})},e.prototype._findCoordRect=function(){var t,e=FV(this.dataZoomModel).infoList;if(!t&&e.length){var n=e[0].model.coordinateSystem;t=n.getRect&&n.getRect()}if(!t){var i=this.api.getWidth(),r=this.api.getHeight();t={x:.2*i,y:.2*r,width:.6*i,height:.6*r}}return t},e.type="dataZoom.slider",e}(KV);function MB(t){t.registerComponentModel(IB),t.registerComponentView(SB),rG(t)}var DB={get:function(t,e,n){var i=X((TB[t]||{})[e]);return n&&st(i)?i[i.length-1]:i}},TB={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},PB=DB,ZB=qM.mapVisual,kB=qM.eachVisual,NB=st,LB=$,RB=Sr,VB=_r,GB=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.stateList=["inRange","outOfRange"],n.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],n.layoutMode={type:"box",ignoreSize:!0},n.dataBound=[-1/0,1/0],n.targetVisuals={},n.controllerVisuals={},n}return A(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n)},e.prototype.optionUpdated=function(t,e){var n=this.option;M.canvasSupported||(n.realtime=!1),!e&&Tz(n,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(t){var e=this.stateList;t=ot(t,this),this.controllerVisuals=Dz(this.option.controller,e,t),this.targetVisuals=Dz(this.option.target,e,t)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,e=[];return null==t||"all"===t?this.ecModel.eachSeries(function(t,n){e.push(n)}):e=Ur(t),e},e.prototype.eachTargetSeries=function(t,e){$(this.getTargetSeriesIndices(),function(n){var i=this.ecModel.getSeriesByIndex(n);i&&t.call(e,i)},this)},e.prototype.isTargetSeries=function(t){var e=!1;return this.eachTargetSeries(function(n){n===t&&(e=!0)}),e},e.prototype.formatValueText=function(t,e,n){var i,r=this.option,o=r.precision,a=this.dataBound,s=r.formatter;n=n||["<",">"],st(t)&&(t=t.slice(),i=!0);var l=e?t:i?[u(t[0]),u(t[1])]:u(t);return ut(s)?s.replace("{value}",i?l[0]:l).replace("{value2}",i?l[1]:l):lt(s)?i?s(t[0],t[1]):s(t):i?t[0]===a[0]?n[0]+" "+l[1]:t[1]===a[1]?n[1]+" "+l[0]:l[0]+" - "+l[1]:l;function u(t){return t===a[0]?"min":t===a[1]?"max":(+t).toFixed(Math.min(o,20))}},e.prototype.resetExtent=function(){var t=this.option,e=RB([t.min,t.max]);this._dataExtent=e},e.prototype.getDataDimension=function(t){var e=this.option.dimension,n=t.dimensions;if(null!=e||n.length){if(null!=e)return t.getDimension(e);for(var i=t.dimensions,r=i.length-1;r>=0;r--){var o=i[r];if(!t.getDimensionInfo(o).isCalculationCoord)return o}}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var t=this.ecModel,e=this.option,n={inRange:e.inRange,outOfRange:e.outOfRange},i=e.target||(e.target={}),r=e.controller||(e.controller={});H(i,n),H(r,n);var o=this.isCategory();function a(n){NB(e.color)&&!n.inRange&&(n.inRange={color:e.color.slice().reverse()}),n.inRange=n.inRange||{color:t.get("gradientColor")}}a.call(this,i),a.call(this,r),function(t,e,n){var i=t[e],r=t[n];i&&!r&&(r=t[n]={},LB(i,function(t,e){if(qM.isValidType(e)){var n=PB.get(e,"inactive",o);null!=n&&(r[e]=n,"color"!==e||r.hasOwnProperty("opacity")||r.hasOwnProperty("colorAlpha")||(r.opacity=[0,0]))}}))}.call(this,i,"inRange","outOfRange"),function(t){var e=(t.inRange||{}).symbol||(t.outOfRange||{}).symbol,n=(t.inRange||{}).symbolSize||(t.outOfRange||{}).symbolSize,i=this.get("inactiveColor"),r=this.getItemSymbol()||"roundRect";LB(this.stateList,function(a){var s=this.itemSize,l=t[a];l||(l=t[a]={color:o?i:[i]}),null==l.symbol&&(l.symbol=e&&X(e)||(o?r:[r])),null==l.symbolSize&&(l.symbolSize=n&&X(n)||(o?s[0]:[s[0],s[0]])),l.symbol=ZB(l.symbol,function(t){return"none"===t?r:t});var u=l.symbolSize;if(null!=u){var c=-1/0;kB(u,function(t){t>c&&(c=t)}),l.symbolSize=ZB(u,function(t){return VB(t,[0,c],[0,s[0]],!0)})}},this)}.call(this,r)},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(t){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(t){return null},e.prototype.getVisualMeta=function(t){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},e}(Xd),zB=[20,140];function OB(t,e,n){if(n[0]===n[1])return n.slice();for(var i=(n[1]-n[0])/200,r=n[0],o=[],a=0;a<=200&&r<n[1];a++)o.push(r),r+=i;return o.push(n[1]),o}var BB=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return A(e,t),e.prototype.optionUpdated=function(e,n){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(t){t.mappingMethod="linear",t.dataExtent=this.getExtent()}),this._resetRange()},e.prototype.resetItemSize=function(){t.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(null==e[0]||isNaN(e[0]))&&(e[0]=zB[0]),(null==e[1]||isNaN(e[1]))&&(e[1]=zB[1])},e.prototype._resetRange=function(){var t=this.getExtent(),e=this.option.range;!e||e.auto?(t.auto=1,this.option.range=t):st(e)&&(e[0]>e[1]&&e.reverse(),e[0]=Math.max(e[0],t[0]),e[1]=Math.min(e[1],t[1]))},e.prototype.completeVisualOption=function(){t.prototype.completeVisualOption.apply(this,arguments),$(this.stateList,function(t){var e=this.option.controller[t].symbolSize;e&&e[0]!==e[1]&&(e[0]=e[1]/3)},this)},e.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},e.prototype.getSelected=function(){var t=this.getExtent(),e=Sr((this.get("range")||[]).slice());return e[0]>t[1]&&(e[0]=t[1]),e[1]>t[1]&&(e[1]=t[1]),e[0]<t[0]&&(e[0]=t[0]),e[1]<t[0]&&(e[1]=t[0]),e},e.prototype.getValueState=function(t){var e=this.option.range,n=this.getExtent();return(e[0]<=n[0]||e[0]<=t)&&(e[1]>=n[1]||t<=e[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var e=[];return this.eachTargetSeries(function(n){var i=[],r=n.getData();r.each(this.getDataDimension(r),function(e,n){t[0]<=e&&e<=t[1]&&i.push(n)},this),e.push({seriesId:n.id,dataIndex:i})},this),e},e.prototype.getVisualMeta=function(t){var e=OB(this,"outOfRange",this.getExtent()),n=OB(this,"inRange",this.option.range.slice()),i=[];function r(e,n){i.push({value:e,color:t(e,n)})}for(var o=0,a=0,s=n.length,l=e.length;a<l&&(!n.length||e[a]<=n[0]);a++)e[a]<n[o]&&r(e[a],"outOfRange");for(var u=1;o<s;o++,u=0)u&&i.length&&r(n[o],"outOfRange"),r(n[o],"inRange");for(u=1;a<l;a++)(!n.length||n[n.length-1]<e[a])&&(u&&(i.length&&r(i[i.length-1].value,"outOfRange"),u=0),r(e[a],"outOfRange"));var c=i.length;return{stops:i,outerColors:[c?i[0].color:"transparent",c?i[c-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=Ph(GB.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),e}(GB),WB=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.autoPositionValues={left:1,right:1,top:1,bottom:1},n}return A(e,t),e.prototype.init=function(t,e){this.ecModel=t,this.api=e},e.prototype.render=function(t,e,n,i){this.visualMapModel=t,!1!==t.get("show")?this.doRender(t,e,n,i):this.group.removeAll()},e.prototype.renderBackground=function(t){var e=this.visualMapModel,n=md(e.get("padding")||0),i=t.getBoundingRect();t.add(new Ws({z2:-1,silent:!0,shape:{x:i.x-n[3],y:i.y-n[0],width:i.width+n[3]+n[1],height:i.height+n[0]+n[2]},style:{fill:e.get("backgroundColor"),stroke:e.get("borderColor"),lineWidth:e.get("borderWidth")}}))},e.prototype.getControllerVisual=function(t,e,n){var i=(n=n||{}).forceState,r=this.visualMapModel,o={};if("color"===e){var a=r.get("contentColor");o.color=a}function s(t){return o[t]}function l(t,e){o[t]=e}var u=r.controllerVisuals[i||r.getValueState(t)];return $(qM.prepareVisualTypes(u),function(i){var r=u[i];n.convertOpacityToAlpha&&"opacity"===i&&(i="colorAlpha",r=u.__alphaForOpacity),qM.dependsOn(i,e)&&r&&r.applyVisual(t,s,l)}),o[e]},e.prototype.positionGroup=function(t){var e=this.visualMapModel,n=this.api;Vd(t,e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},e.prototype.doRender=function(t,e,n,i){},e.type="visualMap",e}(xf),EB=[["left","right","width"],["top","bottom","height"]];function XB(t,e,n){var i=t.option,r=i.align;if(null!=r&&"auto"!==r)return r;for(var o={width:e.getWidth(),height:e.getHeight()},a="horizontal"===i.orient?1:0,s=EB[a],l=[0,null,10],u={},c=0;c<3;c++)u[EB[1-a][c]]=l[c],u[s[c]]=2===c?n[0]:i[s[c]];var h=[["x","width",3],["y","height",0]][a],d=Rd(u,o,i.padding);return s[(d.margin[h[2]]||0)+d[h[0]]+.5*d[h[1]]<.5*o[h[1]]?0:1]}function HB(t,e){return $(t||[],function(t){null!=t.dataIndex&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")}),t}var jB=_r,FB=$,YB=Math.min,UB=Math.max,JB=12;function QB(t,e,n,i){return new Fu({shape:{points:t},draggable:!!n,cursor:e,drift:n,onmousemove:function(t){we(t.event)},ondragend:i})}function KB(t){var e=t.get("hoverLinkOnHandle");return!!(null==e?t.get("realtime"):e)}function qB(t){return"vertical"===t?"ns-resize":"ew-resize"}var $B=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._shapes={},n._dataInterval=[],n._handleEnds=[],n._hoverLinkDataIndices=[],n}return A(e,t),e.prototype.doRender=function(t,e,n,i){this._api=n,i&&"selectDataRange"===i.type&&i.from===this.uid||this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,e=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(e);var n=t.get("text");this._renderEndsText(e,n,0),this._renderEndsText(e,n,1),this._updateView(!0),this.renderBackground(e),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(e)},e.prototype._renderEndsText=function(t,e,n){if(e){var i=e[1-n];i=null!=i?i+"":"";var r=this.visualMapModel,o=r.get("textGap"),a=r.itemSize,s=this._shapes.mainGroup,l=this._applyTransform([a[0]/2,0===n?-o:a[1]+o],s),u=this._applyTransform(0===n?"bottom":"top",s),c=this._orient,h=this.visualMapModel.textStyleModel;this.group.add(new qs({style:{x:l[0],y:l[1],verticalAlign:"horizontal"===c?"middle":u,align:"horizontal"===c?u:"center",text:i,font:h.getFont(),fill:h.getTextColor()}}))}},e.prototype._renderBar=function(t){var e=this.visualMapModel,n=this._shapes,i=e.itemSize,r=this._orient,o=this._useHandle,a=XB(e,this.api,i),s=n.mainGroup=this._createBarGroup(a),l=new cr;s.add(l),l.add(n.outOfRange=QB()),l.add(n.inRange=QB(null,o?qB(this._orient):null,ot(this._dragHandle,this,"all",!1),ot(this._dragHandle,this,"all",!0))),l.setClipPath(new Ws({shape:{x:0,y:0,width:i[0],height:i[1],r:3}}));var u=e.textStyleModel.getTextRect("国"),c=UB(u.width,u.height);o&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(e,s,0,i,c,r),this._createHandle(e,s,1,i,c,r)),this._createIndicator(e,s,i,c,r),t.add(s)},e.prototype._createHandle=function(t,e,n,i,r,o){var a=ot(this._dragHandle,this,n,!1),s=ot(this._dragHandle,this,n,!0),l=qi(t.get("handleSize"),i[0]),u=hm(t.get("handleIcon"),-l/2,-l/2,l,l,null,!0),c=qB(this._orient);u.attr({cursor:c,draggable:!0,drift:a,ondragend:s,onmousemove:function(t){we(t.event)}}),u.x=i[0]/2,u.useStyle(t.getModel("handleStyle").getItemStyle()),u.setStyle({strokeNoScale:!0,strokeFirst:!0}),u.style.lineWidth*=2,u.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),Jl(u,!0),e.add(u);var h=this.visualMapModel.textStyleModel,d=new qs({cursor:c,draggable:!0,drift:a,onmousemove:function(t){we(t.event)},ondragend:s,style:{x:0,y:0,text:"",font:h.getFont(),fill:h.getTextColor()}});d.ensureState("blur").style={opacity:.1},d.stateTransition={duration:200},this.group.add(d);var p=[l,0],g=this._shapes;g.handleThumbs[n]=u,g.handleLabelPoints[n]=p,g.handleLabels[n]=d},e.prototype._createIndicator=function(t,e,n,i,r){var o=qi(t.get("indicatorSize"),n[0]),a=hm(t.get("indicatorIcon"),-o/2,-o/2,o,o,null,!0);a.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var s=t.getModel("indicatorStyle").getItemStyle();if(a instanceof Ns){var l=a.style;a.useStyle(F({image:l.image,x:l.x,y:l.y,width:l.width,height:l.height},s))}else a.useStyle(s);e.add(a);var u=this.visualMapModel.textStyleModel,c=new qs({silent:!0,invisible:!0,style:{x:0,y:0,text:"",font:u.getFont(),fill:u.getTextColor()}});this.group.add(c);var h=[("horizontal"===r?i/2:6)+n[0]/2,0],d=this._shapes;d.indicator=a,d.indicatorLabel=c,d.indicatorLabelPoint=h,this._firstShowIndicator=!0},e.prototype._dragHandle=function(t,e,n,i){if(this._useHandle){if(this._dragging=!e,!e){var r=this._applyTransform([n,i],this._shapes.mainGroup,!0);this._updateInterval(t,r[1]),this._hideIndicator(),this._updateView()}e===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),e?!this._hovering&&this._clearHoverLinkToSeries():KB(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},e.prototype._resetInterval=function(){var t=this.visualMapModel,e=this._dataInterval=t.getSelected(),n=t.getExtent(),i=[0,t.itemSize[1]];this._handleEnds=[jB(e[0],n,i,!0),jB(e[1],n,i,!0)]},e.prototype._updateInterval=function(t,e){e=e||0;var n=this.visualMapModel,i=this._handleEnds,r=[0,n.itemSize[1]];JT(e,i,r,t,0);var o=n.getExtent();this._dataInterval=[jB(i[0],r,o,!0),jB(i[1],r,o,!0)]},e.prototype._updateView=function(t){var e=this.visualMapModel,n=e.getExtent(),i=this._shapes,r=[0,e.itemSize[1]],o=t?r:this._handleEnds,a=this._createBarVisual(this._dataInterval,n,o,"inRange"),s=this._createBarVisual(n,n,r,"outOfRange");i.inRange.setStyle({fill:a.barColor}).setShape("points",a.barPoints),i.outOfRange.setStyle({fill:s.barColor}).setShape("points",s.barPoints),this._updateHandle(o,a)},e.prototype._createBarVisual=function(t,e,n,i){var r={forceState:i,convertOpacityToAlpha:!0},o=this._makeColorGradient(t,r),a=[this.getControllerVisual(t[0],"symbolSize",r),this.getControllerVisual(t[1],"symbolSize",r)],s=this._createBarPoints(n,a);return{barColor:new cc(0,0,0,1,o),barPoints:s,handlesColor:[o[0].color,o[o.length-1].color]}},e.prototype._makeColorGradient=function(t,e){var n=[],i=(t[1]-t[0])/100;n.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var r=1;r<100;r++){var o=t[0]+i*r;if(o>t[1])break;n.push({color:this.getControllerVisual(o,"color",e),offset:r/100})}return n.push({color:this.getControllerVisual(t[1],"color",e),offset:1}),n},e.prototype._createBarPoints=function(t,e){var n=this.visualMapModel.itemSize;return[[n[0]-e[0],t[0]],[n[0],t[0]],[n[0],t[1]],[n[0]-e[1],t[1]]]},e.prototype._createBarGroup=function(t){var e=this._orient,n=this.visualMapModel.get("inverse");return new cr("horizontal"!==e||n?"horizontal"===e&&n?{scaleX:"bottom"===t?-1:1,rotation:-Math.PI/2}:"vertical"!==e||n?{scaleX:"left"===t?1:-1}:{scaleX:"left"===t?1:-1,scaleY:-1}:{scaleX:"bottom"===t?1:-1,rotation:Math.PI/2})},e.prototype._updateHandle=function(t,e){if(this._useHandle){var n=this._shapes,i=this.visualMapModel,r=n.handleThumbs,o=n.handleLabels,a=i.itemSize,s=i.getExtent();FB([0,1],function(l){var u=r[l];u.setStyle("fill",e.handlesColor[l]),u.y=t[l];var c=jB(t[l],[0,a[1]],s,!0),h=this.getControllerVisual(c,"symbolSize");u.scaleX=u.scaleY=h/a[0],u.x=a[0]-h/2;var d=Xc(n.handleLabelPoints[l],Ec(u,this.group));o[l].setStyle({x:d[0],y:d[1],text:i.formatValueText(this._dataInterval[l]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",n.mainGroup):"center"})},this)}},e.prototype._showIndicator=function(t,e,n,i){var r=this.visualMapModel,o=r.getExtent(),a=r.itemSize,s=[0,a[1]],l=this._shapes,u=l.indicator;if(u){u.attr("invisible",!1);var c=this.getControllerVisual(t,"color",{convertOpacityToAlpha:!0}),h=this.getControllerVisual(t,"symbolSize"),d=jB(t,o,s,!0),p=a[0]-h/2,g={x:u.x,y:u.y};u.y=d,u.x=p;var f=Xc(l.indicatorLabelPoint,Ec(u,this.group)),y=l.indicatorLabel;y.attr("invisible",!1);var m=this._applyTransform("left",l.mainGroup),v="horizontal"===this._orient;y.setStyle({text:(n||"")+r.formatValueText(e),verticalAlign:v?m:"middle",align:v?"center":m});var I={x:p,y:d,style:{fill:c}},C={style:{x:f[0],y:f[1]}};if(r.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var x={duration:100,easing:"cubicInOut",additive:!0};u.x=g.x,u.y=g.y,u.animateTo(I,x),y.animateTo(C,x)}else u.attr(I),y.attr(C);this._firstShowIndicator=!1;var A=this._shapes.handleLabels;if(A)for(var _=0;_<A.length;_++)this._api.enterBlur(A[_])}},e.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",function(e){if(t._hovering=!0,!t._dragging){var n=t.visualMapModel.itemSize,i=t._applyTransform([e.offsetX,e.offsetY],t._shapes.mainGroup,!0,!0);i[1]=YB(UB(0,i[1]),n[1]),t._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=n[0])}}).on("mouseout",function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},e.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(t,e){var n=this.visualMapModel,i=n.itemSize;if(n.option.hoverLink){var r=[0,i[1]],o=n.getExtent();t=YB(UB(r[0],t),r[1]);var a=function(t,e,n){var i=JB/2,r=t.get("hoverLinkDataSize");r&&(i=jB(r,e,n,!0)/2);return i}(n,o,r),s=[t-a,t+a],l=jB(t,r,o,!0),u=[jB(s[0],r,o,!0),jB(s[1],r,o,!0)];s[0]<r[0]&&(u[0]=-1/0),s[1]>r[1]&&(u[1]=1/0),e&&(u[0]===-1/0?this._showIndicator(l,u[1],"< ",a):u[1]===1/0?this._showIndicator(l,u[0],"> ",a):this._showIndicator(l,l,"≈ ",a));var c=this._hoverLinkDataIndices,h=[];(e||KB(n))&&(h=this._hoverLinkDataIndices=n.findTargetDataIndices(u));var d=function(t,e){var n={},i={};return r(t||[],n),r(e||[],i,n),[o(n),o(i)];function r(t,e,n){for(var i=0,r=t.length;i<r;i++){var o=eo(t[i].seriesId,null);if(null==o)return;for(var a=Ur(t[i].dataIndex),s=n&&n[o],l=0,u=a.length;l<u;l++){var c=a[l];s&&s[c]?s[c]=null:(e[o]||(e[o]={}))[c]=1}}}function o(t,e){var n=[];for(var i in t)if(t.hasOwnProperty(i)&&null!=t[i])if(e)n.push(+i);else{var r=o(t[i],!0);r.length&&n.push({seriesId:i,dataIndex:r})}return n}}(c,h);this._dispatchHighDown("downplay",HB(d[0],n)),this._dispatchHighDown("highlight",HB(d[1],n))}},e.prototype._hoverLinkFromSeriesMouseOver=function(t){var e=t.target,n=this.visualMapModel;if(e&&null!=$s(e).dataIndex){var i=$s(e),r=this.ecModel.getSeriesByIndex(i.seriesIndex);if(n.isTargetSeries(r)){var o=r.getData(i.dataType),a=o.get(n.getDataDimension(o),i.dataIndex);isNaN(a)||this._showIndicator(a,a)}}},e.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var e=this._shapes.handleLabels;if(e)for(var n=0;n<e.length;n++)this._api.leaveBlur(e[n])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",HB(t,this.visualMapModel)),t.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(t,e,n,i){var r=Ec(e,i?null:this.group);return st(t)?Xc(t,r,n):Hc(t,r,n)},e.prototype._dispatchHighDown=function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e}(WB),tW={type:"selectDataRange",event:"dataRangeSelected",update:"update"},eW=function(t,e){e.eachComponent({mainType:"visualMap",query:t},function(e){e.setSelected(t.selected)})},nW=[{createOnAllSeries:!0,reset:function(t,e){var n=[];return e.eachComponent("visualMap",function(e){var i,r,o,a,s,l=t.pipelineContext;!e.isTargetSeries(t)||l&&l.large||n.push((i=e.stateList,r=e.targetVisuals,o=ot(e.getValueState,e),a=e.getDataDimension(t.getData()),s={},$(i,function(t){var e=qM.prepareVisualTypes(r[t]);s[t]=e}),{progress:function(t,e){var n,i;function l(t){return fy(e,i,t)}function u(t,n){my(e,i,t,n)}for(null!=a&&(n=e.getDimension(a));null!=(i=t.next());){var c=e.getRawDataItem(i);if(!c||!1!==c.visualMap)for(var h=null!=a?e.get(n,i):i,d=o(h),p=r[d],g=s[d],f=0,y=g.length;f<y;f++){var m=g[f];p[m]&&p[m].applyVisual(h,l,u)}}}}))}),n}},{createOnAllSeries:!0,reset:function(t,e){var n=t.getData(),i=[];e.eachComponent("visualMap",function(e){if(e.isTargetSeries(t)){var r=e.getVisualMeta(ot(iW,null,t,e))||{stops:[],outerColors:[]},o=e.getDataDimension(n),a=n.getDimensionInfo(o);null!=a&&(r.dimension=a.index,i.push(r))}}),t.getData().setVisual("visualMeta",i)}}];function iW(t,e,n,i){for(var r=e.targetVisuals[i],o=qM.prepareVisualTypes(r),a={color:yy(t.getData(),"color")},s=0,l=o.length;s<l;s++){var u=o[s],c=r["opacity"===u?"__alphaForOpacity":u];c&&c.applyVisual(n,h,d)}return a.color;function h(t){return a[t]}function d(t,e){a[t]=e}}var rW=$;function oW(t){var e=t&&t.visualMap;st(e)||(e=e?[e]:[]),rW(e,function(t){if(t){aW(t,"splitList")&&!aW(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var e=t.pieces;e&&st(e)&&rW(e,function(t){dt(t)&&(aW(t,"start")&&!aW(t,"min")&&(t.min=t.start),aW(t,"end")&&!aW(t,"max")&&(t.max=t.end))})}})}function aW(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}var sW=!1;function lW(t){sW||(sW=!0,t.registerSubTypeDefaulter("visualMap",function(t){return t.categories||(t.pieces?t.pieces.length>0:t.splitNumber>0)&&!t.calculable?"piecewise":"continuous"}),t.registerAction(tW,eW),$(nW,function(e){t.registerVisual(t.PRIORITY.VISUAL.COMPONENT,e)}),t.registerPreprocessor(oW))}function uW(t){t.registerComponentModel(BB),t.registerComponentView($B),lW(t)}var cW=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._pieceList=[],n}return A(e,t),e.prototype.optionUpdated=function(e,n){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],hW[this._mode].call(this,this._pieceList),this._resetSelected(e,n);var r=this.option.categories;this.resetVisual(function(t,e){"categories"===i?(t.mappingMethod="category",t.categories=X(r)):(t.dataExtent=this.getExtent(),t.mappingMethod="piecewise",t.pieceList=tt(this._pieceList,function(t){return t=X(t),"inRange"!==e&&(t.visual=null),t}))})},e.prototype.completeVisualOption=function(){var e=this.option,n={},i=qM.listVisualTypes(),r=this.isCategory();function o(t,e,n){return t&&t[e]&&t[e].hasOwnProperty(n)}$(e.pieces,function(t){$(i,function(e){t.hasOwnProperty(e)&&(n[e]=1)})}),$(n,function(t,n){var i=!1;$(this.stateList,function(t){i=i||o(e,t,n)||o(e.target,t,n)},this),!i&&$(this.stateList,function(t){(e[t]||(e[t]={}))[n]=PB.get(n,"inRange"===t?"active":"inactive",r)})},this),t.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(t,e){var n=this.option,i=this._pieceList,r=(e?n:t).selected||{};if(n.selected=r,$(i,function(t,e){var n=this.getSelectedMapKey(t);r.hasOwnProperty(n)||(r[n]=!0)},this),"single"===n.selectedMode){var o=!1;$(i,function(t,e){var n=this.getSelectedMapKey(t);r[n]&&(o?r[n]=!1:o=!0)},this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(t){return"categories"===this._mode?t.value+"":t.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(t){this.option.selected=X(t)},e.prototype.getValueState=function(t){var e=qM.findPieceIndex(t,this._pieceList);return null!=e&&this.option.selected[this.getSelectedMapKey(this._pieceList[e])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var e=[],n=this._pieceList;return this.eachTargetSeries(function(i){var r=[],o=i.getData();o.each(this.getDataDimension(o),function(e,i){qM.findPieceIndex(e,n)===t&&r.push(i)},this),e.push({seriesId:i.id,dataIndex:r})},this),e},e.prototype.getRepresentValue=function(t){var e;if(this.isCategory())e=t.value;else if(null!=t.value)e=t.value;else{var n=t.interval||[];e=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return e},e.prototype.getVisualMeta=function(t){if(!this.isCategory()){var e=[],n=["",""],i=this,r=this._pieceList.slice();if(r.length){var o=r[0].interval[0];o!==-1/0&&r.unshift({interval:[-1/0,o]}),(o=r[r.length-1].interval[1])!==1/0&&r.push({interval:[o,1/0]})}else r.push({interval:[-1/0,1/0]});var a=-1/0;return $(r,function(t){var e=t.interval;e&&(e[0]>a&&s([a,e[0]],"outOfRange"),s(e.slice()),a=e[1])},this),{stops:e,outerColors:n}}function s(r,o){var a=i.getRepresentValue({interval:r});o||(o=i.getValueState(a));var s=t(a,o);r[0]===-1/0?n[0]=s:r[1]===1/0?n[1]=s:e.push({value:r[0],color:s},{value:r[1],color:s})}},e.type="visualMap.piecewise",e.defaultOption=Ph(GB.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e}(GB),hW={splitNumber:function(t){var e=this.option,n=Math.min(e.precision,20),i=this.getExtent(),r=e.splitNumber;r=Math.max(parseInt(r,10),1),e.splitNumber=r;for(var o=(i[1]-i[0])/r;+o.toFixed(n)!==o&&n<5;)n++;e.precision=n,o=+o.toFixed(n),e.minOpen&&t.push({interval:[-1/0,i[0]],close:[0,0]});for(var a=0,s=i[0];a<r;s+=o,a++){var l=a===r-1?i[1]:s+o;t.push({interval:[s,l],close:[1,1]})}e.maxOpen&&t.push({interval:[i[1],1/0],close:[0,0]}),Wr(t),$(t,function(t,e){t.index=e,t.text=this.formatValueText(t.interval)},this)},categories:function(t){var e=this.option;$(e.categories,function(e){t.push({text:this.formatValueText(e,!0),value:e})},this),dW(e,t)},pieces:function(t){var e=this.option;$(e.pieces,function(e,n){dt(e)||(e={value:e});var i={text:"",index:n};if(null!=e.label&&(i.text=e.label),e.hasOwnProperty("value")){var r=i.value=e.value;i.interval=[r,r],i.close=[1,1]}else{for(var o=i.interval=[],a=i.close=[0,0],s=[1,0,1],l=[-1/0,1/0],u=[],c=0;c<2;c++){for(var h=[["gte","gt","min"],["lte","lt","max"]][c],d=0;d<3&&null==o[c];d++)o[c]=e[h[d]],a[c]=s[d],u[c]=2===d;null==o[c]&&(o[c]=l[c])}u[0]&&o[1]===1/0&&(a[0]=0),u[1]&&o[0]===-1/0&&(a[1]=0),o[0]===o[1]&&a[0]&&a[1]&&(i.value=o[0])}i.visual=qM.retrieveVisuals(e),t.push(i)},this),dW(e,t),Wr(t),$(t,function(t){var e=t.close,n=[["<","≤"][e[1]],[">","≥"][e[0]]];t.text=t.text||this.formatValueText(null!=t.value?t.value:t.interval,!1,n)},this)}};function dW(t,e){var n=t.inverse;("vertical"===t.orient?!n:n)&&e.reverse()}var pW=cW,gW=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return A(e,t),e.prototype.doRender=function(){var t=this.group;t.removeAll();var e=this.visualMapModel,n=e.get("textGap"),i=e.textStyleModel,r=i.getFont(),o=i.getTextColor(),a=this._getItemAlign(),s=e.itemSize,l=this._getViewData(),u=l.endsText,c=Ct(e.get("showLabel",!0),!u);u&&this._renderEndsText(t,u[0],s,c,a),$(l.viewPieceList,function(i){var l=i.piece,u=new cr;u.onclick=ot(this._onItemClick,this,l),this._enableHoverLink(u,i.indexInModelPieceList);var h=e.getRepresentValue(l);if(this._createItemSymbol(u,h,[0,0,s[0],s[1]]),c){var d=this.visualMapModel.getValueState(h);u.add(new qs({style:{x:"right"===a?-n:s[0]+n,y:s[1]/2,text:l.text,verticalAlign:"middle",align:a,font:r,fill:o,opacity:"outOfRange"===d?.5:1}}))}t.add(u)},this),u&&this._renderEndsText(t,u[1],s,c,a),Ld(e.get("orient"),t,e.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},e.prototype._enableHoverLink=function(t,e){var n=this;t.on("mouseover",function(){return i("highlight")}).on("mouseout",function(){return i("downplay")});var i=function(t){var i=n.visualMapModel;i.option.hoverLink&&n.api.dispatchAction({type:t,batch:HB(i.findTargetDataIndices(e),i)})}},e.prototype._getItemAlign=function(){var t=this.visualMapModel,e=t.option;if("vertical"===e.orient)return XB(t,this.api,t.itemSize);var n=e.align;return n&&"auto"!==n||(n="left"),n},e.prototype._renderEndsText=function(t,e,n,i,r){if(e){var o=new cr,a=this.visualMapModel.textStyleModel;o.add(new qs({style:{x:i?"right"===r?n[0]:0:n[0]/2,y:n[1]/2,verticalAlign:"middle",align:i?r:"center",text:e,font:a.getFont(),fill:a.getTextColor()}})),t.add(o)}},e.prototype._getViewData=function(){var t=this.visualMapModel,e=tt(t.getPieceList(),function(t,e){return{piece:t,indexInModelPieceList:e}}),n=t.get("text"),i=t.get("orient"),r=t.get("inverse");return("horizontal"===i?r:!r)?e.reverse():n&&(n=n.slice().reverse()),{viewPieceList:e,endsText:n}},e.prototype._createItemSymbol=function(t,e,n){t.add(hm(this.getControllerVisual(e,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(e,"color")))},e.prototype._onItemClick=function(t){var e=this.visualMapModel,n=e.option,i=X(n.selected),r=e.getSelectedMapKey(t);"single"===n.selectedMode?(i[r]=!0,$(i,function(t,e){i[e]=e===r})):i[r]=!i[r],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:i})},e.type="visualMap.piecewise",e}(WB);function fW(t){t.registerComponentModel(pW),t.registerComponentView(gW),lW(t)}var yW={label:{enabled:!0},decal:{show:!1}},mW=oo(),vW={};function IW(t,e){var n=t.getModel("aria");if(n.get("enabled")){var i=X(yW);H(i.label,t.getLocaleModel().get("aria"),!1),H(n.option,i,!1),function(){if(n.getModel("decal").get("show")){var e=Zt();t.eachSeries(function(t){if(t.useColorPaletteOnData){var n=e.get(t.type);n||(n={},e.set(t.type,n)),mW(t).scope=n}}),t.eachRawSeries(function(e){if(!t.isSeriesFiltered(e))if("function"!=typeof e.enableAriaDecal){var n=e.getData();if(e.useColorPaletteOnData){var i=e.getRawData(),r={},o=mW(e).scope;n.each(function(t){var e=n.getRawIndex(t);r[e]=t});var a=i.count();i.each(function(t){var s=r[t],l=i.getName(t)||t+"",c=yp(e.ecModel,l,o,a),h=n.getItemVisual(s,"decal");n.setItemVisual(s,"decal",u(h,c))})}else{var s=yp(e.ecModel,e.name,vW,t.getSeriesCount()),l=n.getVisual("decal");n.setVisual("decal",u(l,s))}}else e.enableAriaDecal();function u(t,e){var n=t?F(F({},e),t):e;return n.dirty=!0,n}})}}(),function(){var i=t.getLocaleModel().get("aria"),o=n.getModel("label");if(o.option=Y(o.option,i),!o.get("enabled"))return;var a=e.getZr().dom;if(o.get("description"))return void a.setAttribute("aria-label",o.get("description"));var s,l=t.getSeriesCount(),u=o.get(["data","maxCount"])||10,c=o.get(["series","maxCount"])||10,h=Math.min(l,c);if(l<1)return;var d=function(){var e=t.get("title");e&&e.length&&(e=e[0]);return e&&e.text}();if(d){var p=o.get(["general","withTitle"]);s=r(p,{title:d})}else s=o.get(["general","withoutTitle"]);var g=[],f=l>1?o.get(["series","multiple","prefix"]):o.get(["series","single","prefix"]);s+=r(f,{seriesCount:l}),t.eachSeries(function(e,n){if(n<h){var i=void 0,a=e.get("name"),s=a?"withName":"withoutName";i=r(i=l>1?o.get(["series","multiple",s]):o.get(["series","single",s]),{seriesId:e.seriesIndex,seriesName:e.get("name"),seriesType:(x=e.subType,t.getLocaleModel().get(["series","typeNames"])[x]||"自定义图")});var c=e.getData();if(c.count()>u){var d=o.get(["data","partialData"]);i+=r(d,{displayCnt:u})}else i+=o.get(["data","allData"]);for(var p=[],f=0;f<c.count();f++)if(f<u){var y=c.getName(f),m=Cg(c,f),v=o.get(["data",y?"withName":"withoutName"]);p.push(r(v,{name:y,value:m}))}var I=o.get(["data","separator","middle"]),C=o.get(["data","separator","end"]);i+=p.join(I)+C,g.push(i)}var x});var y=o.getModel(["series","multiple","separator"]),m=y.get("middle"),v=y.get("end");s+=g.join(m)+v,a.setAttribute("aria-label",s)}()}function r(t,e){if("string"!=typeof t)return t;var n=t;return $(e,function(t,e){n=n.replace(new RegExp("\\{\\s*"+e+"\\s*\\}","g"),t)}),n}}function CW(t){if(t&&t.aria){var e=t.aria;null!=e.show&&(e.enabled=e.show),e.label=e.label||{},$(["description","general","series","data"],function(t){null!=e[t]&&(e.label[t]=e[t])})}}var xW={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},AW=function(){function t(t){if(null==(this._condVal=ut(t)?new RegExp(t):vt(t)?t:null)){0,pd("")}}return t.prototype.evaluate=function(t){var e=typeof t;return"string"===e?this._condVal.test(t):"number"===e&&this._condVal.test(t+"")},t}(),_W=function(){function t(){}return t.prototype.evaluate=function(){return this.value},t}(),bW=function(){function t(){}return t.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(!t[e].evaluate())return!1;return!0},t}(),wW=function(){function t(){}return t.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(t[e].evaluate())return!0;return!1},t}(),SW=function(){function t(){}return t.prototype.evaluate=function(){return!this.child.evaluate()},t}(),MW=function(){function t(){}return t.prototype.evaluate=function(){for(var t=!!this.valueParser,e=(0,this.getValue)(this.valueGetterParam),n=t?this.valueParser(e):null,i=0;i<this.subCondList.length;i++)if(!this.subCondList[i].evaluate(t?n:e))return!1;return!0},t}();function DW(t,e){if(!0===t||!1===t){var n=new _W;return n.value=t,n}return PW(t)||pd(""),t.and?TW("and",t,e):t.or?TW("or",t,e):t.not?function(t,e){var n=t.not;0;PW(n)||pd("");var i=new SW;i.child=DW(n,e),i.child||pd("");return i}(t,e):function(t,e){for(var n=e.prepareGetValue(t),i=[],r=rt(t),o=t.parser,a=o?Tg(o):null,s=0;s<r.length;s++){var l=r[s];if("parser"!==l&&!e.valueGetterAttrMap.get(l)){var u=Lt(xW,l)?xW[l]:l,c=t[l],h=a?a(c):c,d=Lg(u,h)||"reg"===u&&new AW(h);d||pd(""),i.push(d)}}i.length||pd("");var p=new MW;return p.valueGetterParam=n,p.valueParser=a,p.getValue=e.getValue,p.subCondList=i,p}(t,e)}function TW(t,e,n){var i=e[t];st(i)||pd(""),i.length||pd("");var r="and"===t?new bW:new wW;return r.children=tt(i,function(t){return DW(t,n)}),r.children.length||pd(""),r}function PW(t){return dt(t)&&!q(t)}var ZW=function(){function t(t,e){this._cond=DW(t,e)}return t.prototype.evaluate=function(){return this._cond.evaluate()},t}();var kW={type:"echarts:filter",transform:function(t){for(var e,n,i,r=t.upstream,o=(n=t.config,i={valueGetterAttrMap:Zt({dimension:!0}),prepareGetValue:function(t){var e=t.dimension;Lt(t,"dimension")||pd("");var n=r.getDimensionInfo(e);return n||pd(""),{dimIdx:n.index}},getValue:function(t){return r.retrieveValueFromItem(e,t.dimIdx)}},new ZW(n,i)),a=[],s=0,l=r.count();s<l;s++)e=r.getRawDataItem(s),o.evaluate()&&a.push(e);return{data:a}}};var NW={type:"echarts:sort",transform:function(t){var e=t.upstream,n=Ur(t.config);n.length||pd("");var i=[];$(n,function(t){var n=t.dimension,r=t.order,o=t.parser,a=t.incomparable;if(null==n&&pd(""),"asc"!==r&&"desc"!==r&&pd(""),a&&"min"!==a&&"max"!==a){0,pd("")}if("asc"!==r&&"desc"!==r){0,pd("")}var s=e.getDimensionInfo(n);s||pd("");var l=o?Tg(o):null;o&&!l&&pd(""),i.push({dimIdx:s.index,parser:l,comparator:new kg(r,a)})});var r=e.sourceFormat;r!==Jd&&r!==Qd&&pd("");for(var o=[],a=0,s=e.count();a<s;a++)o.push(e.getRawDataItem(a));return o.sort(function(t,n){for(var r=0;r<i.length;r++){var o=i[r],a=e.retrieveValueFromItem(t,o.dimIdx),s=e.retrieveValueFromItem(n,o.dimIdx);o.parser&&(a=o.parser(a),s=o.parser(s));var l=o.comparator.evaluate(a,s);if(0!==l)return l}return 0}),{data:o}}};var LW=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataset",e}return A(e,t),e.prototype.init=function(e,n,i){t.prototype.init.call(this,e,n,i),this._sourceManager=new Xg(this),Hg(this)},e.prototype.mergeOption=function(e,n){t.prototype.mergeOption.call(this,e,n),Hg(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:tp},e}(Xd),RW=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataset",e}return A(e,t),e.type="dataset",e}(xf);aC([function(t){t.registerPainter("canvas",DA)}]),aC([function(t){t.registerPainter("svg",v_)}]),aC([function(t){t.registerChartView($_),t.registerSeriesModel(I_),t.registerLayout(tb("line",!0)),t.registerVisual({seriesType:"line",reset:function(t){var e=t.getData(),n=t.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=e.getVisual("style").fill),e.setVisual("legendLineStyle",n)}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,ib("line"))},function(t){t.registerChartView(_b),t.registerSeriesModel(ab),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,at(mx,"bar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,vx),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,ib("bar")),t.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,e){var n=t.componentType||"series";e.eachComponent({mainType:n,query:t},function(e){t.sortInfo&&e.axis.setCategorySortInfo(t.sortInfo)})})},function(t){t.registerChartView(Lb),t.registerSeriesModel(Gb),qy("pie",t.registerAction),t.registerLayout(at(Sb,"pie")),t.registerProcessor(Mb("pie"))},function(t){aC(Rw),t.registerSeriesModel(zb),t.registerChartView(Eb),t.registerLayout(tb("scatter"))},function(t){aC(Jw),t.registerChartView(Bw),t.registerSeriesModel(Ww),t.registerLayout(Vw),t.registerProcessor(Mb("radar")),t.registerPreprocessor(Ow)},function(t){aC(RS),t.registerChartView(IS),t.registerSeriesModel(CS),t.registerLayout(AS),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,xS),qy("map",t.registerAction)},function(t){t.registerChartView(KS),t.registerSeriesModel(pM),t.registerLayout(fM),t.registerVisual(yM),function(t){t.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},function(e){var n=t.dataIndex,i=e.getData().tree.getNodeByDataIndex(n);i.isExpand=!i.isExpand})}),t.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},function(e){var n=NS(e.coordinateSystem,t);e.setCenter&&e.setCenter(n.center),e.setZoom&&e.setZoom(n.zoom)})})}(t)},function(t){t.registerSeriesModel(CM),t.registerChartView(VM),t.registerVisual(eD),t.registerLayout(pD),function(t){for(var e=0;e<vM.length;e++)t.registerAction({type:vM[e],update:"updateView"},mM);t.registerAction({type:"treemapRootToNode",update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"treemap",query:t},function(e,n){var i=uM(t,["treemapZoomToNode","treemapRootToNode"],e);if(i){var r=e.getViewRoot();r&&(t.direction=hM(r,i.node)?"rollUp":"drillDown"),e.resetViewRoot(i.node)}})})}(t)},function(t){t.registerChartView(hT),t.registerSeriesModel(IT),t.registerProcessor(mD),t.registerVisual(vD),t.registerVisual(CD),t.registerLayout(ZD),t.registerLayout(t.PRIORITY.VISUAL.POST_CHART_LAYOUT,zD),t.registerLayout(BD),t.registerCoordinateSystem("graphView",{dimensions:wS.dimensions,create:WD}),t.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},function(){}),t.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},function(){}),t.registerAction(CT,function(t,e){e.eachComponent({mainType:"series",query:t},function(e){var n=NS(e.coordinateSystem,t);e.setCenter&&e.setCenter(n.center),e.setZoom&&e.setZoom(n.zoom)})})},function(t){t.registerChartView(wT),t.registerSeriesModel(ST)},function(t){t.registerChartView(TT),t.registerSeriesModel(PT),t.registerLayout(ZT),t.registerProcessor(Mb("funnel"))},function(t){aC(sZ),t.registerChartView(GT),t.registerSeriesModel(OT),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,WT)},function(t){t.registerChartView(cZ),t.registerSeriesModel(hZ),t.registerLayout(dZ),t.registerVisual(bZ),t.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(e){e.setNodePosition(t.dataIndex,[t.localX,t.localY])})})},function(t){t.registerSeriesModel(MZ),t.registerChartView(NZ),t.registerVisual(LZ),t.registerLayout(VZ),t.registerTransform(GZ)},function(t){t.registerChartView(JZ),t.registerSeriesModel(KZ),t.registerPreprocessor(qZ),t.registerVisual(ik),t.registerLayout(ak)},function(t){t.registerChartView(uk),t.registerSeriesModel(ck),t.registerLayout(tb("effectScatter"))},function(t){t.registerChartView(vk),t.registerSeriesModel(Ak),t.registerLayout(mk),t.registerVisual(bk)},function(t){t.registerChartView(Mk),t.registerSeriesModel(Dk)},function(t){t.registerChartView(Jk),t.registerSeriesModel(Qk),t.registerLayout(at(mx,"pictorialBar"))},function(t){t.registerChartView(Kk),t.registerSeriesModel(qk),t.registerLayout($k),t.registerProcessor(Mb("themeRiver"))},function(t){t.registerChartView(sN),t.registerSeriesModel(lN),t.registerLayout(at(cN,"sunburst")),t.registerProcessor(at(Mb,"sunburst")),t.registerVisual(hN),function(t){t.registerAction({type:rN,update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},function(e,n){var i=uM(t,[rN],e);if(i){var r=e.getViewRoot();r&&(t.direction=hM(r,i.node)?"rollUp":"drillDown"),e.resetViewRoot(i.node)}})}),t.registerAction({type:oN,update:"none"},function(t,e,n){t=F({},t),e.eachComponent({mainType:"series",subType:"sunburst",query:t},function(e){var n=uM(t,[oN],e);n&&(t.dataIndex=n.node.dataIndex)}),n.dispatchAction(F(t,{type:"highlight"}))}),t.registerAction({type:aN,update:"updateView"},function(t,e,n){t=F({},t),n.dispatchAction(F(t,{type:"downplay"}))})}(t)},function(t){t.registerChartView(aL),t.registerSeriesModel(oL)}]),aC(function(t){aC(Rw),aC(wR)}),aC(function(t){aC(wR),_w.registerAxisPointerClass("PolarAxisPointer",DR),t.registerCoordinateSystem("polar",ER),t.registerComponentModel(TR),t.registerComponentView(aV),Qb(t,"angle",ZR,rV),Qb(t,"radius",kR,oV),t.registerComponentView(JR),t.registerComponentView(tV),t.registerLayout(at(iV,"bar"))}),aC(RS),aC(function(t){aC(wR),_w.registerAxisPointerClass("SingleAxisPointer",wV),t.registerComponentView(SV),t.registerComponentView(dV),t.registerComponentModel(gV),Qb(t,"single",gV,gV.defaultOption),t.registerCoordinateSystem("single",vV)}),aC(sZ),aC(function(t){t.registerComponentModel(DV),t.registerComponentView(ZV),t.registerCoordinateSystem("calendar",NV)}),aC(function(t){t.registerComponentModel(GV),t.registerComponentView(zV),t.registerPreprocessor(VV)}),aC(function(t){t.registerComponentModel(cG),t.registerComponentView(dG),lG("saveAsImage",gG),lG("magicType",vG),lG("dataView",SG),lG("dataZoom",qG),lG("restore",ZG),aC(oG)}),aC(function(t){aC(wR),t.registerComponentModel($G),t.registerComponentView(_z),t.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){}),t.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){})}),aC(wR),aC(function(t){t.registerComponentView(Ez),t.registerComponentModel(Hz),t.registerPreprocessor(wz),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,Gz),t.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(t,e){e.eachComponent({mainType:"brush",query:t},function(e){e.setAreas(t.areas)})}),t.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},function(){}),t.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},function(){}),lG("brush",Fz)}),aC(function(t){t.registerComponentModel(Yz),t.registerComponentView(Uz)}),aC(function(t){t.registerComponentModel(Kz),t.registerComponentView(rO),t.registerSubTypeDefaulter("timeline",function(){return"slider"}),function(t){t.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,e){var n=e.getComponent("timeline");return n&&null!=t.currentIndex&&(n.setCurrentIndex(t.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.setPlayState(!1)),e.resetOption("timeline",{replaceMerge:n.get("replaceMerge",!0)}),Y({currentIndex:n.option.currentIndex},t)}),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,e){var n=e.getComponent("timeline");n&&null!=t.playState&&n.setPlayState(t.playState)})}(t),t.registerPreprocessor(oO)}),aC(function(t){t.registerComponentModel(pO),t.registerComponentView(bO),t.registerPreprocessor(function(t){lO(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}),aC(function(t){t.registerComponentModel(wO),t.registerComponentView(kO),t.registerPreprocessor(function(t){lO(t.series,"markLine")&&(t.markLine=t.markLine||{})})}),aC(function(t){t.registerComponentModel(NO),t.registerComponentView(WO),t.registerPreprocessor(function(t){lO(t.series,"markArea")&&(t.markArea=t.markArea||{})})}),aC(function(t){aC($O),aC(aB)}),aC(function(t){aC(vB),aC(MB)}),aC(vB),aC(MB),aC(function(t){aC(uW),aC(fW)}),aC(uW),aC(fW),aC(function(t){t.registerPreprocessor(CW),t.registerVisual(t.PRIORITY.VISUAL.ARIA,IW)}),aC(function(t){t.registerTransform(kW),t.registerTransform(NW)}),aC(function(t){t.registerComponentModel(LW),t.registerComponentView(RW)});var VW=n(0),GW=n.n(VW),zW=n(3);function OW(t,e){var n={};return e.forEach(function(e){n[e]=t[e]}),n}function BW(t){return"function"==typeof t}var WW=n(4),EW=n.n(WW),XW=function(t){function e(e){var n=t.call(this,e)||this;return n.echarts=f,n}return A(e,t),e}(function(t){function e(e){var n=t.call(this,e)||this;return n.echarts=e.echarts,n.ele=null,n}return A(e,t),e.prototype.componentDidMount=function(){this.renderNewEcharts()},e.prototype.componentDidUpdate=function(t){var e=this.props.shouldSetOption;if(!BW(e)||e(t,this.props)){if(!EW()(t.theme,this.props.theme)||!EW()(t.opts,this.props.opts)||!EW()(t.onEvents,this.props.onEvents))return this.dispose(),void this.renderNewEcharts();var n=["option","notMerge","lazyUpdate","showLoading","loadingOption"];if(!EW()(OW(this.props,n),OW(t,n))){var i=this.updateEChartsOption();if(!EW()(t.style,this.props.style)||!EW()(t.className,this.props.className))try{i.resize()}catch(t){console.warn(t)}}}},e.prototype.componentWillUnmount=function(){this.dispose()},e.prototype.getEchartsInstance=function(){return this.echarts.getInstanceByDom(this.ele)||this.echarts.init(this.ele,this.props.theme,this.props.opts)},e.prototype.dispose=function(){if(this.ele){try{Object(zW.clear)(this.ele)}catch(t){console.warn(t)}this.echarts.dispose(this.ele)}},e.prototype.renderNewEcharts=function(){var t=this.props,e=t.onEvents,n=t.onChartReady,i=this.updateEChartsOption();this.bindEvents(i,e||{}),BW(n)&&n(i),this.ele&&Object(zW.bind)(this.ele,function(){try{i.resize()}catch(t){console.warn(t)}})},e.prototype.bindEvents=function(t,e){function n(e,n){"string"==typeof e&&BW(n)&&t.on(e,function(e){n(e,t)})}for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n(i,e[i])},e.prototype.updateEChartsOption=function(){var t=this.props,e=t.option,n=t.notMerge,i=void 0!==n&&n,r=t.lazyUpdate,o=void 0!==r&&r,a=t.showLoading,s=t.loadingOption,l=void 0===s?null:s,u=this.getEchartsInstance();return u.setOption(e,i,o),a?u.showLoading(l):u.hideLoading(),u},e.prototype.render=function(){var t=this,e=this.props,n=e.style,i=e.className,r=void 0===i?"":i,o=_({height:300},n);return GW.a.createElement("div",{ref:function(e){t.ele=e},style:o,className:"echarts-for-react "+r})},e}(VW.PureComponent)),HW=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function jW(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FW(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function YW(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var UW=function(t){function e(t){jW(this,e);var n=FW(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={},n}return YW(e,React.Component),HW(e,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var t=this,e=this.props.data,n=[],i=[];(void 0===e?[]:e).map(function(t,e){i.push({value:t.successRate,symbol:"image://"+C.a}),n.push(t.firewallName)});var r={tooltip:{show:!0,formatter:"{b}:{c}",backgroundColor:"rgba(56,128,255,0.5)",border:"rgba(56,128,255,1)",textStyle:{background:"rgba(56,128,255,0.2)",color:"#fff",fontSize:12}},grid:{left:"7%",right:"4%",top:"15%",bottom:"5%",containLabel:!0},xAxis:[{type:"category",nameTextStyle:{color:"#9EEAFF"},splitLine:{show:!0,lineStyle:{width:1,color:"rgba(56,145,255,0.4)"}},splitArea:{show:!0,interval:0,areaStyle:{color:["rgba(250,250,250,0)","rgba(56,128,255,0.14)"]}},axisTick:{show:!1},axisLine:{show:i.length>0,lineStyle:{width:1,color:"rgba(56,145,255,0.4)"}},axisLabel:{fontSize:12,interval:0,color:"#C6E5FF",fontFamily:"PingFangSC-Regular",margin:10,formatter:function(t){var e="",n=t.length,i=Math.ceil(n/4);if(n>4)for(var r=0;r<i;r++){var o=4*r,a=o+4;e+=r==i-1?t.substring(o,n):t.substring(o,a)+"\n"}else e=t;return e}},data:n}],yAxis:[{name:i.length>0?"服务成功率(%)":"",nameTextStyle:{color:"#C6E5FF",fontSize:12,padding:[0,0,0,15]},type:"value",axisLine:{show:i.length>0,lineStyle:{width:1,color:"rgba(56,145,255,0.4)"}},axisTick:{show:!1},axisLabel:{fontSize:12,interval:0,color:"#C6E5FF",margin:10,fontFamily:"PingFangSC-Regular"},splitLine:{lineStyle:{width:1,color:"rgba(56,145,255,0.4)"}}},{axisLine:{lineStyle:{width:1,color:"rgba(56,145,255,0.4)"}},axisTick:{show:!1},splitLine:{show:!1}}],series:[{type:"pictorialBar",barWidth:45,label:{show:!1},data:i}]};return React.createElement("div",null,React.createElement(XW,{option:r,ref:function(e){return t.myChart=e},style:{width:568,height:222}}))}}]),e}(),JW=function(t){function e(){return jW(this,e),FW(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return YW(e,v.a),HW(e,[{key:"getDefaultData",value:function(){return{data:[{firewallName:"北京",successRate:258},{firewallName:"福州",successRate:536},{firewallName:"华东",successRate:323},{firewallName:"华南",successRate:423},{firewallName:"上海",successRate:345},{firewallName:"呼和浩特",successRate:323},{firewallName:"大连",successRate:132},{firewallName:"深圳",successRate:123},{firewallName:"华西",successRate:99},{firewallName:"广州",successRate:64}]}}},{key:"getReactComponent",value:function(){return UW}}]),e}();JW.defaultConfig={},JW.defaultOptions={},JW.events={},JW.enableLoadCssFile=!0;var QW=JW;Object(y.registerComponent)('2222222222222222','v1.0.0',QW)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createSensor=void 0;var i,r=(i=n(6))&&i.__esModule?i:{default:i};e.createSensor=function(t){var e=void 0,n=[],i=(0,r.default)(function(){n.forEach(function(e){e(t)})}),o=function(){e.disconnect(),n=[],e=void 0};return{element:t,bind:function(r){var o;e||((o=new ResizeObserver(i)).observe(t),i(),e=o),-1===n.indexOf(r)&&n.push(r)},destroy:o,unbind:function(t){var i=n.indexOf(t);-1!==i&&n.splice(i,1),0===n.length&&e&&o()}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createSensor=void 0;var i,r=(i=n(6))&&i.__esModule?i:{default:i},o=n(5);e.createSensor=function(t){var e=void 0,n=[],i=(0,r.default)(function(){n.forEach(function(e){e(t)})}),a=function(){e&&e.parentNode&&(e.contentDocument&&e.contentDocument.defaultView.removeEventListener("resize",i),e.parentNode.removeChild(e),e=void 0,n=[])};return{element:t,bind:function(r){e||(e=function(){"static"===getComputedStyle(t).position&&(t.style.position="relative");var e=document.createElement("object");return e.onload=function(){e.contentDocument.defaultView.addEventListener("resize",i),i()},e.style.display="block",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.height="100%",e.style.width="100%",e.style.overflow="hidden",e.style.pointerEvents="none",e.style.zIndex="-1",e.style.opacity="0",e.setAttribute("class",o.SensorClassName),e.setAttribute("tabindex",o.SensorTabIndex),e.type="text/html",t.appendChild(e),e.data="about:blank",e}()),-1===n.indexOf(r)&&n.push(r)},destroy:a,unbind:function(t){var i=n.indexOf(t);-1!==i&&n.splice(i,1),0===n.length&&e&&a()}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createSensor=void 0;var i=n(13),r=n(12),o="undefined"!=typeof ResizeObserver?r.createSensor:i.createSensor;e.createSensor=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=1;e.default=function(){return"".concat(i++)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.removeSensor=e.getSensor=void 0;var i,r=(i=n(15))&&i.__esModule?i:{default:i},o=n(14),a=n(5);var s={};e.getSensor=function(t){var e=t.getAttribute(a.SizeSensorId);if(e&&s[e])return s[e];var n=(0,r.default)();t.setAttribute(a.SizeSensorId,n);var i=(0,o.createSensor)(t);return s[n]=i,i};e.removeSensor=function(t){var e=t.element.getAttribute(a.SizeSensorId);t.element.removeAttribute(a.SizeSensorId),t.destroy(),e&&s[e]&&delete s[e]}}]);
➜  test git:(master) ✗ 